!function(n){function a(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}var t={};return a.m=n,a.c=t,a.d=function(n,t,e){a.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},a.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return a.d(t,"a",t),t},a.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},a.p="",a(a.s=10)}([function(n,a,t){"use strict";(function(n){var a=t(2);n.pop=a.pop;var e=null,i=$(".js-login-info"),s=$(".js-tips-user");i.on("mouseenter",function(){clearTimeout(e),s.show(),$.ajax({url:"/api/plan/info",data:{},success:function(n){if(n&&n.plan){var a=n.plan,t=a.today_complete_rate;$(".circle circle[stroke-dasharray]").attr("stroke-dasharray",2*t+" "+(200-2*t)),$(".circle span").html(t+"%")}}})}),i.on("mouseleave",function(){e=setTimeout(function(){s.hide()},300)}),s.on("mouseenter",function(){clearTimeout(e)}),s.on("mouseleave",function(){e=setTimeout(function(){s.hide()},300)});var o=$(".page-header__search .butn-soso");o.on("click",function(){var n=$(".page-header__search input").val();n&&n.length>0&&(window.open("/search?keywords="+n,"_blank"),$(".page-header__search input").val(""))}),$(".page-header__search input").keyup(function(){$(document).keypress(function(n){if(13==n.which){var a=$(".page-header__search input").val();a&&a.length>0&&window.open("/search?keywords="+a,"_blank")}})}),"localhost"==location.hostname?$.ajaxSetup({beforeSend:function(n,a){n.setRequestHeader("Authorization","Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjU0MDQ0MDQxZDA0M2RjMDgyYWJjNDA4OTg2OTlmZjc5ZjFmNzA0ZDgxNzEwNGYwYjVmYmYzY2ZjZjhmOWM4MTdiMzBhYjRiOWNmMTk3NDUyIn0.eyJhdWQiOiI2IiwianRpIjoiNTQwNDQwNDFkMDQzZGMwODJhYmM0MDg5ODY5OWZmNzlmMWY3MDRkODE3MTA0ZjBiNWZiZjNjZmNmOGY5YzgxN2IzMGFiNGI5Y2YxOTc0NTIiLCJpYXQiOjE1MjA2NzcxMDgsIm5iZiI6MTUyMDY3NzEwOCwiZXhwIjoxNTUyMjEzMTA4LCJzdWIiOiI4Iiwic2NvcGVzIjpbXX0.3irFbm_3KpOt6F4RsqJBsNH6NnvagJqLbRX3gPl_8uCJySMYpBBvDTXtMTmNqxTg02qviGTkw2gQw0e366keWAwP9ShKHfZQlS3uOINUzNBciB5BUFwP7PdFpgyPXVs5aCSU48Bmwb-QAZEv2rrX5CYGF0cxYjvDRjFWrGJwSiED9lxRva78057ioFicMeGsdVZjacqjzHzEi4EQHbaYt3KgT6z3EucFXcxk5ZyB9wlaXtdfrJ1JlPA4rv4bN-m6AYUVXOFy_XKLUU2_13xYIL3a0qVCL6_xMQxIueHvdi-46gwvTIkKfmbJSSpOcfuuUp3SG0i7YA4d5XArXuGRKO4iQ8aFQ0KBh8ot5n5MfdSVK9ZpA5-Ym-5O1NSbcnxDHYWj2XGzwqoSQrLGP9R-ijX0eITN7rcGfnIEgHYTwgIya8O7Rd6qqvQ-QCgX5PuxSSwlvBKpf49ENJxrX_CQY0d8Fh0R6zB5orsEzR6wQhOhzTi0OJuTgRq6V9Qc91PGBZVJKwE3Xxip3Mcf3wxTKEKgAdBb-I5cSbVgeZJN4eIC5ik0ASLrSaroQyMLe9xT7OOCnm1vA-A6iEWJcx7NIzsrfhEtCgSDs11pnQr70ltgLSdYoWi8NwSXpo37EP4io8ozRCC2qnuE3TlfqMzgJ14AlgXmipySWhhVrhuKtzw"),a.url="http://wxjy-mingyang.mion.cn"+a.url}}):$.ajaxSetup({beforeSend:function(n){window.WXJY=WXJY||{},"undefined"!=typeof WXJY.csrfToken&&n.setRequestHeader("X-CSRF-TOKEN",WXJY.csrfToken)}}),$.ajaxSetup({statusCode:{200:function(n){0==!n.code&&(0,a.pop)(n.message,"#fa8c16")},401:function(){window.location.href="/login"},500:function(){(0,a.pop)("网络异常，请稍后再试","red")}},error:function(n){"Unauthenticated."==n.error&&(window.location.href="/login")},withCredentials:!0})}).call(a,t(1))},function(n,a,t){"use strict";var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(i){"object"==typeof window&&(e=window)}n.exports=e},function(n,a,t){"use strict";function e(n,a){$(".popprompt")[0]||$('<div class="popprompt">看什么看，做题</div>').appendTo("body");var t=a?a:"#00e290";$(".popprompt").text("").text(n).css("background",t).removeClass("off").addClass("on"),setTimeout(function(){$(".popprompt").removeClass("on").addClass("off")},2e3)}Object.defineProperty(a,"__esModule",{value:!0}),a.pop=e},,,,,,,,function(n,a,t){"use strict";t(0),$(function(){function n(n){var a=$(".butn-sort").val();$.get("/api/volume/video/"+e,{page:n?n:1,order:a},function(n){if(0===n.code&&!$.isEmptyObject(n.data))if(n.data.comments.total>0){var a=n.data.comments;if($(".commont-list h3 span").text(a.total),$(".commont-list ul").html(""),(a.next_page_url||a.prev_page_url)&&($(".page-navgator").show(),$(".page-navgator a:first-child").attr({"class":a.prev_page_url?"":"disabled","data-url":a.prev_page_url}),$(".page-navgator a:last-child").attr({"class":a.next_page_url?"":"disabled","data-url":a.next_page_url})),a.data.length>0){var t=a.data,e="";$.each(t,function(n,a){var t="";a.children.length>0&&(t='<ul class="advice-sub">',$.each(a.children,function(n,a){t+='<li>\n                                        <div class="left">\n                                            '+(a.user.avatar?"<img src="+a.user.avatar+' alt="">':'<img src="/static/imgs/header.png" alt="">')+'\n                                        </div>\n                                        <div class="right">\n                                            <p class="title">'+a.user.nickname+"</p>\n                                            <p>"+a.content+"</p>\n                                        </div>\n                                    </li>"}),t+="</ul>"),e+="<li data-comment-id="+a.id+'>\n                                    <div class="advice-par clearfix">\n                                        <div class="left">\n                                            '+(a.user.avatar?"<img src="+a.user.avatar+' alt="">':'<img src="/static/imgs/header.png" alt="">')+'\n                                        </div>\n                                        <div class="right">\n                                            <p class="title">'+a.user.nickname+"</p>\n                                            <p>"+a.content+'</p>\n                                            <p class="foot">\n                                            '+(a.is_voted?'<span class="added-zan"><i class="icon-video-zan"></i> 赞同 <span>'+a.vote_count+"</span></span>":'<span><i class="icon-video-nozan"></i> 赞同 <span>'+a.vote_count+"</span></span>")+'\n                                                <span><i class="icon-video-message"></i> 评论 <span class="connum">'+a.children.length+'</span></span>\n                                                <!--<span><i class="icon-video-share"></i> 分享 <span>2</span></span>-->\n                                                <span class="fr">'+a.created_at+"</span>\n                                            </p>\n                                        </div>\n                                        </div>\n                                        "+t+"\n                                    </li>"}),$(e).appendTo(".commont-list ul")}}else 0===n.code&&0===n.data.comments.total&&($(".page-navgator").hide(),$(".commont-list h3 span").text(0),$(".commont-list ul").html(""),$("<span>暂无评论</span>").prependTo($(".commont-list")))})}function a(n,a,t){$(n).addClass("added-zan").find("span").text(parseInt($(n).find("span").text())+1).end().find("i").removeClass(a).addClass(t)}function t(n,a,t){$(n).removeClass("added-zan").find("span").text(parseInt($(n).find("span").text())-1).end().find("i").removeClass(a).addClass(t)}var e=$(".page-content").data("testVolumeId");$(".title-zan").click(function(){var n=this;$(this).hasClass("added-zan")?$.post("/api/volume/vote",{test_volume_id:e,vote_type:0},function(a){a&&0===a.code&&t(n,"icon-video-zan-big","icon-video-nozan-big")}):$.post("/api/volume/vote",{test_volume_id:e,vote_type:1},function(t){t&&0===t.code&&a(n,"icon-video-nozan-big","icon-video-zan-big")})}),n(),$(".commont-list ul").on("click",".foot>span:first-of-type",function(){var n=$(this).closest("li").data("commentId"),e=this;$(this).hasClass("added-zan")?$.post("/api/comment/vote",{comment_id:n,vote_type:0},function(n){n&&0===n.code&&t(e,"icon-video-zan","icon-video-nozan")}):$.post("/api/comment/vote",{comment_id:n,vote_type:1},function(n){n&&0===n.code&&a(e,"icon-video-nozan","icon-video-zan")})}),$(".commont-list ul").on("click",".foot>span:nth-of-type(2)",function(){var n=this;$(this).hasClass("s")?$(this).removeClass("s").closest(".advice-par").siblings(".advice-adv").slideUp(function(){return $(n).closest(".advice-par").siblings(".advice-adv").remove()}):($("<div class=\"advice-adv clearfix\">\n                    <textarea placeholder='请输入内容'></textarea>\n                    <p>提交</p>\n                </div>").insertAfter($(this).closest(".advice-par")),$(this).addClass("s").closest(".advice-par").siblings(".advice-adv").slideDown())}),$(".commont-list ul").on("click",".advice-adv p",function(){var n=$(".advice-adv textarea").val(),a=$(this).closest("li").data("commentId"),t=this;$.post("/api/volume/addComment",{content:n,test_volume_id:e,pid:a},function(n){if(n&&0===n.code){if($.isEmptyObject(n.data.comment))return;var a=$(t).closest("li"),e=a.find(".connum"),i=parseInt(e.text());i++,e.text(i),$(".advice-sub",a).size()||$(".advice-par",a).after($("<ul/>",{"class":"advice-sub"})),$(t).parent().remove(),$('<li>\n                    <div class="left">\n                        '+(n.data.comment.user.avatar?"<img src="+n.data.comment.user.avatar+' alt="">':'<img src="/static/imgs/header.png" alt="">')+'\n                    </div>\n                    <div class="right">\n                        <p class="title">'+n.data.comment.user.nickname+"</p>\n                        <p>"+n.data.comment.content+"</p>\n                    </div>\n                </li>").prependTo($(".advice-sub",a)),e.parent().removeClass("s")}})}),$(".form-wrapper input").click(function(){var n=$(this).siblings("textarea").val(),a=this;$.post("/api/volume/addComment",{test_volume_id:e,content:n},function(n){0!==n.code||$.isEmptyObject(n.data)||n.data.comment&&!function(){var t=$(".commont-list").offset().top-100;$("html,body").animate({scrollTop:t},800),$(a).siblings("textarea").val("");var e=n.data.comment,i='<li class="newComment" data-comment-id='+e.id+'>\n                                    <div class="advice-par clearfix">\n                                    <div class="left">\n                                        '+(e.user.avatar?"<img src="+e.user.avatar+' alt="">':'<img src="/static/imgs/header.png" alt="">')+'\n                                    </div>\n                                    <div class="right">\n                                        <p class="title">'+e.user.nickname+"</p>\n                                        <p>"+e.content+'</p>\n                                        <p class="foot">\n                                            <span><i class="icon-video-nozan"></i> 赞同 <span>0</span></span>\n                                            <span><i class="icon-video-message"></i> 评论 <span class="connum">0</span></span>\n                                            <!--<span><i class="icon-video-share"></i> 分享 <span>2</span></span>-->\n                                            <span class="fr">'+e.created_at+"</span>\n                                        </p>\n                                    </div>\n                                    </div>\n                                </li>";$(".commont-list>span").remove(),$(i).prependTo(".commont-list>ul");setTimeout(function(){return $(i).removeClass("newComment")},2e3)}()})}),$(".butn-sort").change(function(){n()}),$(".page-navgator a").click(function(){if($(this).data("url")){var a=function(n){var a=n.lastIndexOf("=");return n=n.substring(a+1,n.length)},t=$(".commont-list").offset().top-100;$("html,body").animate({scrollTop:t});var e=a($(this).data("url"));n(e)}})})}]);
//# sourceMappingURL=courseVideo.js.map
!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){"use strict";(function(t){var e=n(2);t.pop=e.pop;var i=null,s=$(".js-login-info"),r=$(".js-tips-user");s.on("mouseenter",function(){clearTimeout(i),r.show(),$.ajax({url:"/api/plan/info",data:{},success:function(t){if(t&&t.plan){var e=t.plan,n=e.today_complete_rate;$(".circle circle[stroke-dasharray]").attr("stroke-dasharray",2*n+" "+(200-2*n)),$(".circle span").html(n+"%")}}})}),s.on("mouseleave",function(){i=setTimeout(function(){r.hide()},300)}),r.on("mouseenter",function(){clearTimeout(i)}),r.on("mouseleave",function(){i=setTimeout(function(){r.hide()},300)});var o=$(".page-header__search .butn-soso");o.on("click",function(){var t=$(".page-header__search input").val();t&&t.length>0&&window.open("/search?keywords="+t,"_blank")}),$(".page-header__search input").keyup(function(){$(document).keypress(function(t){if(13==t.which){var e=$(".page-header__search input").val();e&&e.length>0&&window.open("/search?keywords="+e,"_blank")}})}),"localhost"==location.hostname?$.ajaxSetup({beforeSend:function(t,e){t.setRequestHeader("Authorization","Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjU0MDQ0MDQxZDA0M2RjMDgyYWJjNDA4OTg2OTlmZjc5ZjFmNzA0ZDgxNzEwNGYwYjVmYmYzY2ZjZjhmOWM4MTdiMzBhYjRiOWNmMTk3NDUyIn0.eyJhdWQiOiI2IiwianRpIjoiNTQwNDQwNDFkMDQzZGMwODJhYmM0MDg5ODY5OWZmNzlmMWY3MDRkODE3MTA0ZjBiNWZiZjNjZmNmOGY5YzgxN2IzMGFiNGI5Y2YxOTc0NTIiLCJpYXQiOjE1MjA2NzcxMDgsIm5iZiI6MTUyMDY3NzEwOCwiZXhwIjoxNTUyMjEzMTA4LCJzdWIiOiI4Iiwic2NvcGVzIjpbXX0.3irFbm_3KpOt6F4RsqJBsNH6NnvagJqLbRX3gPl_8uCJySMYpBBvDTXtMTmNqxTg02qviGTkw2gQw0e366keWAwP9ShKHfZQlS3uOINUzNBciB5BUFwP7PdFpgyPXVs5aCSU48Bmwb-QAZEv2rrX5CYGF0cxYjvDRjFWrGJwSiED9lxRva78057ioFicMeGsdVZjacqjzHzEi4EQHbaYt3KgT6z3EucFXcxk5ZyB9wlaXtdfrJ1JlPA4rv4bN-m6AYUVXOFy_XKLUU2_13xYIL3a0qVCL6_xMQxIueHvdi-46gwvTIkKfmbJSSpOcfuuUp3SG0i7YA4d5XArXuGRKO4iQ8aFQ0KBh8ot5n5MfdSVK9ZpA5-Ym-5O1NSbcnxDHYWj2XGzwqoSQrLGP9R-ijX0eITN7rcGfnIEgHYTwgIya8O7Rd6qqvQ-QCgX5PuxSSwlvBKpf49ENJxrX_CQY0d8Fh0R6zB5orsEzR6wQhOhzTi0OJuTgRq6V9Qc91PGBZVJKwE3Xxip3Mcf3wxTKEKgAdBb-I5cSbVgeZJN4eIC5ik0ASLrSaroQyMLe9xT7OOCnm1vA-A6iEWJcx7NIzsrfhEtCgSDs11pnQr70ltgLSdYoWi8NwSXpo37EP4io8ozRCC2qnuE3TlfqMzgJ14AlgXmipySWhhVrhuKtzw"),e.url="http://wxjy-mingyang.mion.cn"+e.url}}):$.ajaxSetup({beforeSend:function(t){window.WXJY=WXJY||{},"undefined"!=typeof WXJY.csrfToken&&t.setRequestHeader("X-CSRF-TOKEN",WXJY.csrfToken)}}),$.ajaxSetup({statusCode:{200:function(t){0==!t.code&&(0,e.pop)(t.message,"#fa8c16")},401:function(){window.location.href="/login"},500:function(){(0,e.pop)("网络异常，请稍后再试","red")}},error:function(t){"Unauthenticated."==t.error&&(window.location.href="/login")},withCredentials:!0})}).call(e,n(1))},function(t,e,n){"use strict";var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(s){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,n){"use strict";function i(t,e){$(".popprompt")[0]||$('<div class="popprompt">看什么看，做题</div>').appendTo("body");var n=e?e:"#00e290";$(".popprompt").text("").text(t).css("background",n).removeClass("off").addClass("on"),setTimeout(function(){$(".popprompt").removeClass("on").addClass("off")},2e3)}Object.defineProperty(e,"__esModule",{value:!0}),e.pop=i},,,,function(t,e,n){"use strict";n(0),n(7),$(function(){function t(t){t=0|t;var n=t/60|0,i=e(t%60);return e(n)+":"+i}function e(t){for(var e=arguments.length<=1||void 0===arguments[1]?2:arguments[1],n=t.toString().length;n<e;)t="0"+t,n++;return t}function n(t,e){e.hover(function(e){var n=this;l=setTimeout(function(){if("none"==t.css("display")){e=e||window.event;var i=$(n).text(),s=window.parent.document.documentElement.clientWidth,r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=s-1200>=0?(s-1200)/2+e.clientX-40:e.clientX-40,a=e.clientY+r+240;i?$.ajax({url:"/api/word/query",data:{word:i},success:function(e){if(0===e.code&&e.data.word){var n=e.data.word;t.css({display:"block",left:o+"px",top:a+"px"}),t.find(".select input").val(""),t.find(".word b").html(i),t.attr("id",n.id),t.find(".phonetic span").html(n.phonetic),t.find(".meaning div span").html(n.interpretation),t.find(".example div span").html(n.example),t.find(".selRec,.wordBug,.addWordMark").hide(),t.find(".foot").show(),""!=n.test_method?t.find(".moreMeaning p").html(n.test_method):t.find(".moreMeaning").hide(),n.note?t.find(".wordMark p").html(n.note.note_content):t.find(".wordMark").hide(),n.is_marked?(t.find(".addWord").attr("id",0),t.find(".addWord").addClass("added").text("已添加到生词本")):(t.find(".addWord").attr("id",n.id),t.find(".addWord").removeClass("added").text("添加到生词本"))}else t.css("display","none")}}):t.css("display","none")}},300)},function(){clearTimeout(l)})}$(".iframe",window.parent.document).css("height",$("body").outerHeight()+20);var i=void 0,s=$(".audio").get(0),r=MathQuill.getInterface(2);$(".mathquill-embedded-latex").each(function(t,e){r.StaticMath(e)}),$(".icon-mp3-play").click(function(){return s.readyState<4?void pop("音频资源加载中，请稍等","#fa8c16"):($(".audio-time").find(".dur").text(""+t(s.duration)),void($(this).hasClass("p")?($(this).removeClass("p icon-mp3-parse").addClass("icon-mp3-play"),s.pause(),clearInterval(i)):($(this).addClass("p icon-mp3-parse").removeClass("icon-mp3-play"),s.play(),i=setInterval(function(){var e=s.duration,n=s.currentTime;parseInt(n/2)===parseInt(e/2)?(n=s.currentTime=0,s.pause(),$(".icon-mp3-parse").removeClass("p icon-mp3-parse").addClass("icon-mp3-play"),$(".userright .progress .rate").css("width",0),clearInterval(i)):$(".userright .rate").width(n/e*280),$(".audio-time").find(".cur").text(""+t(n))},1e3))))});var o=0,a=0;$(".userright .progress").click(function(e){s.paused||(a=$(this).offset().left,o=e.pageX-a,o<=0?o=0:o>280&&(o=280),$(".userright .progress .rate").css("width",o),s.currentTime=o/280*s.duration,$(".audio-time").find(".cur").text(""+t(s.currentTime)))}),$(".discuss .left header div").click(function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).index();$(".discuss .left footer .content").eq(t).removeClass("hidden").siblings().addClass("hidden")}),$(".post p").click(function(){var t=$(".post textarea").val(),e=[],n=$(".clicked",window.parent.document).parent().attr("href");$(n.split("&")).each(function(t,n){e.push(n.split("=")[1])}),$.ajax({url:"/api/comment",type:"POST",data:{content:t,test_topic_id:e[1],test_volume_id:e[0]},success:function(t){0==t.code?(window.parent.pop("评论成功"),window.location.reload()):window.parent.pop("评论失败，请重试","red")}})}),$(".feature span:first-of-type").click(function(){var t=parseInt($(this).find("b").text());if(!$(this).find("b").hasClass("zaned")){t++,$(this).find("b").text(""+t).addClass("zaned");var e=$(this).closest("li").data().commentId;$.ajax({url:"/api/comment/like",type:"POST",data:{comment_id:e},success:function(t){}})}});var l=null,c=$(".translation",window.parent.document);n(c,$(".inner>section .translate")),$(document).click(function(t){t.target!==c[0]&&"block"==c.css("display")&&c.hide()})})},function(t,e,n){"use strict";!function(){function t(){}function e(t){var e=t.length-1;return function(){var n=kt.call(arguments,0,e),i=kt.call(arguments,e);return t.apply(this,n.concat([i]))}}function n(t){return e(function(e,n){"function"!=typeof e&&(e=Tt(e));var i=function(t){return e.apply(t,[t].concat(n))};return t.call(this,i)})}function i(t){var e=kt.call(arguments,1);return function(){return t.apply(this,e)}}function s(t,e){if(!e)throw new Error("prayer failed: "+t)}function r(t){s("a direction was passed",t===Qt||t===Ct)}function o(t,e,n){s("a parent is always present",t),s("leftward is properly set up",function(){return e?e[Ct]===n&&e.parent===t:t.ends[Qt]===n}()),s("rightward is properly set up",function(){return n?n[Qt]===e&&n.parent===t:t.ends[Ct]===e}())}function a(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function l(t){return a(),vt(t)}function c(e){function n(t){var e,n;return t&&t.nodeType?(e=_t(t).children(".mq-root-block").attr(qt),n=e&&Dt.byId[e].controller,n?s[n.KIND_OF_MQ](n):null):null}function i(t,e){var n,i,r;e&&e.handlers&&(e.handlers={fns:e.handlers,APIClasses:s});for(n in e)e.hasOwnProperty(n)&&(i=e[n],r=Bt[n],t[n]=r?r(i):i)}var s,r,o;if(!(e>=g&&v>=e))throw"Only interface versions between "+g+" and "+v+" supported. You specified: "+e;s={},n.L=Qt,n.R=Ct,n.config=function(t){return i($t.p,t),this},n.registerEmbed=function(t,e){if(!/^[a-z][a-z0-9]*$/i.test(t))throw"Embed name must start with letter and be only letters and digits";Nt[t]=e},r=s.AbstractMathQuill=jt(Ft,function(t){t.init=function(t){this.__controller=t,this.__options=t.options,this.id=t.id,this.data=t.data},t.__mathquillify=function(t){var e,n=this.__controller,i=n.root,s=n.container;n.createTextarea(),e=s.addClass(t).contents().detach(),i.jQ=_t('<span class="mq-root-block"/>').attr(qt,i.id).appendTo(s),this.latex(e.text()),this.revert=function(){return s.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(e)}},t.config=function(t){return i(this.__options,t),this},t.el=function(){return this.__controller.container[0]},t.text=function(){return this.__controller.exportText()},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexMath(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},t.reflow=function(){return this.__controller.root.postOrder("reflow"),this}}),n.prototype=r.prototype,s.EditableField=jt(r,function(e,n){e.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},e.focus=function(){return this.__controller.textarea.focus(),this},e.blur=function(){return this.__controller.textarea.blur(),this},e.write=function(t){return this.__controller.writeLatex(t),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},e.cmd=function(t){var e,n=this.__controller.notify(),i=n.cursor;return/^\\[a-z]+$/i.test(t)?(t=t.slice(1),e=At[t],e&&(t=e(t),i.selection&&t.replaces(i.replaceSelection()),t.createLeftOf(i.show()),this.__controller.scrollHoriz())):i.parent.write(i,t),n.blurred&&i.hide().parent.blur(),this},e.select=function(){var t=this.__controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[Qt];)t.selectLeft();return this},e.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},e.moveToDirEnd=function(t){return this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(Qt)},e.moveToRightEnd=function(){return this.moveToDirEnd(Ct)},e.keystroke=function(e){var n;for(e=e.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<e.length;n+=1)this.__controller.keystroke(e[n],{preventDefault:t});return this},e.typedText=function(t){for(var e=0;e<t.length;e+=1)this.__controller.typedText(t.charAt(e));return this},e.dropEmbedded=function(t,e,n){var i,s=t-_t(window).scrollLeft(),r=e-_t(window).scrollTop(),o=document.elementFromPoint(s,r);this.__controller.seek(_t(o),t,e),i=gt().setOptions(n),i.createLeftOf(this.__controller.cursor)}}),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=s.EditableField.prototype;for(o in Mt)(function(t,i){var r=s[t]=i(s);n[t]=function(i,s){var o,a=n(i);return a instanceof r||!i||!i.nodeType?a:(o=Rt(r.RootBlock(),_t(i),$t()),o.KIND_OF_MQ=t,r(o).__mathquillify(s,e))},n[t].prototype=r.prototype})(o,Mt[o]);return n}function u(t){var e,n="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" ");for(e=0;e<n.length;e+=1)(function(e){t[e]=function(t){this.controller.handle(e,t)}})(n[e]);t.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function h(t,e,n){return jt(_,{ctrlSeq:t,htmlTemplate:"<"+e+" "+n+">&0</"+e+">"})}function f(t){var e=this.parent,n=t;do{if(n[Ct])return t.insLeftOf(e);n=n.parent.parent}while(n!==e);t.insRightOf(e)}function d(t,e){t.jQadd=function(){e.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},t.reflow=function(){var t=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));H(this.delimjQs,yt(1+.2*(t-1),1.2),1.2*t)}}function p(t,e){var e=e||t,n=dt[t],s=dt[e];Lt[t]=i(ft,Qt,t,n,e,s),Lt[n]=i(ft,Ct,t,n,e,s)}var m,g,v,b,w,x,q,y,O,k,T,j,Q,C,_,S,D,E,A,L,I,z,R,M,$,B,F,N,P,Y,W,X,U,G,H,J,Z,K,V,tt,et,nt,it,st,rt,ot,at,lt,ct,ut,ht,ft,dt,pt,mt,gt,vt,bt,wt=window.jQuery,xt="mathquill-command-id",qt="mathquill-block-id",yt=Math.min,Ot=Math.max,kt=[].slice,Tt=e(function(t,n){return e(function(e,i){return t in e?e[t].apply(e,n.concat(i)):void 0})}),jt=function(t,e,n){function i(t){return"object"==typeof t}function s(t){return"function"==typeof t}function r(){}return function o(a,l){function c(){var t=new u;return s(t.init)&&t.init.apply(t,arguments),t}function u(){}var h,f,d;return l===n&&(l=a,a=Object),c.Bare=u,h=r[t]=a[t],f=u[t]=c[t]=c.p=new r,f.constructor=c,c.mixin=function(e){return u[t]=c[t]=o(c,e)[t],c},(c.open=function(t){if(d={},s(t)?d=t.call(c,f,h,c,a):i(t)&&(d=t),i(d))for(var n in d)e.call(d,n)&&(f[n]=d[n]);return s(f.init)||(f.init=a),c})(l)}}("prototype",{}.hasOwnProperty),Qt=-1,Ct=1,_t=jt(wt,function(t){t.insDirOf=function(t,e){return t===Qt?this.insertBefore(e.first()):this.insertAfter(e.last())},t.insAtDirEnd=function(t,e){return t===Qt?this.prependTo(e):this.appendTo(e)}}),St=jt(function(t){t.parent=0,t[Qt]=0,t[Ct]=0,t.init=function(t,e,n){this.parent=t,this[Qt]=e,this[Ct]=n},this.copy=function(t){return St(t.parent,t[Qt],t[Ct])}}),Dt=jt(function(t){function e(){return i+=1}t[Qt]=0,t[Ct]=0,t.parent=0;var i=0;this.byId={},t.init=function(){this.id=e(),Dt.byId[this.id]=this,this.ends={},this.ends[Qt]=0,this.ends[Ct]=0},t.dispose=function(){delete Dt.byId[this.id]},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=_t(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){function e(t){var n,i;for(t.getAttribute&&(n=t.getAttribute("mathquill-command-id"),i=t.getAttribute("mathquill-block-id"),n&&Dt.byId[n].jQadd(t),i&&Dt.byId[i].jQadd(t)),t=t.firstChild;t;t=t.nextSibling)e(t)}var n;for(t=_t(t||this.html()),n=0;n<t.length;n+=1)e(t[n]);return t},t.createDir=function(t,e){r(t);var n=this;return n.jQize(),n.jQ.insDirOf(t,e.jQ),e[t]=n.adopt(e.parent,e[Qt],e[Ct]),n},t.createLeftOf=function(t){return this.createDir(Qt,t)},t.selectChildren=function(t,e){return zt(t,e)},t.bubble=n(function(t){var e,n;for(e=this;e&&(n=t(e),n!==!1);e=e.parent);return this}),t.postOrder=n(function(t){return function e(n){n.eachChild(e),t(n)}(this),this}),t.isEmpty=function(){return 0===this.ends[Qt]&&0===this.ends[Ct]},t.children=function(){return Et(this.ends[Qt],this.ends[Ct])},t.eachChild=function(){var t=this.children();return t.each.apply(t,arguments),this},t.foldChildren=function(t,e){return this.children().fold(t,e)},t.withDirAdopt=function(t,e,n,i){return Et(this,this).withDirAdopt(t,e,n,i),this},t.adopt=function(t,e,n){return Et(this,this).adopt(t,e,n),this},t.disown=function(){return Et(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}),Et=jt(function(t){t.init=function(t,e,n){if(n===m&&(n=Qt),r(n),s("no half-empty fragments",!t==!e),this.ends={},t){s("withDir is passed to Fragment",t instanceof Dt),s("oppDir is passed to Fragment",e instanceof Dt),s("withDir and oppDir have the same parent",t.parent===e.parent),this.ends[n]=t,this.ends[-n]=e;var i=this.fold([],function(t,e){return t.push.apply(t,e.jQ.get()),t});this.jQ=this.jQ.add(i)}},t.jQ=_t(),t.withDirAdopt=function(t,e,n,i){return t===Qt?this.adopt(e,n,i):this.adopt(e,i,n)},t.adopt=function(t,e,n){var i,s,r;return o(t,e,n),i=this,i.disowned=!1,(s=i.ends[Qt])?(r=i.ends[Ct],e||(t.ends[Qt]=s),n?n[Qt]=r:t.ends[Ct]=r,i.ends[Ct][Ct]=n,i.each(function(n){n[Qt]=e,n.parent=t,e&&(e[Ct]=n),e=n}),i):this},t.disown=function(){var t,e,n=this,i=n.ends[Qt];return!i||n.disowned?n:(n.disowned=!0,t=n.ends[Ct],e=i.parent,o(e,i[Qt],i),o(e,t,t[Ct]),i[Qt]?i[Qt][Ct]=t[Ct]:e.ends[Qt]=t[Ct],t[Ct]?t[Ct][Qt]=i[Qt]:e.ends[Ct]=i[Qt],n)},t.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},t.each=n(function(t){var e,n=this,i=n.ends[Qt];if(!i)return n;for(;i!==n.ends[Ct][Ct]&&(e=t(i),e!==!1);i=i[Ct]);return n}),t.fold=function(t,e){return this.each(function(n){t=e.call(this,t,n)}),t}}),At={},Lt={},It=jt(St,function(t){t.init=function(t,e){this.parent=t,this.options=e;var n=this.jQ=this._jQ=_t('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[Ct]?this.selection&&this.selection.ends[Qt][Qt]===this[Qt]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[Ct].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=_t(),this},t.withDirInsertAt=function(t,e,n,i){var s=this.parent;this.parent=e,this[t]=n,this[-t]=i,s!==e&&s.blur&&s.blur()},t.insDirOf=function(t,e){return r(t),this.jQ.insDirOf(t,e.jQ),this.withDirInsertAt(t,e.parent,e[t],e),this.parent.jQ.addClass("mq-hasCursor"),this},t.insLeftOf=function(t){return this.insDirOf(Qt,t)},t.insRightOf=function(t){return this.insDirOf(Ct,t)},t.insAtDirEnd=function(t,e){return r(t),this.jQ.insAtDirEnd(t,e.jQ),this.withDirInsertAt(t,e,0,e.ends[t]),e.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(Qt,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(Ct,t)},t.jumpUpDown=function(t,e){var n,i,s=this;s.upDownCache[t.id]=St.copy(s),n=s.upDownCache[e.id],n?n[Ct]?s.insLeftOf(n[Ct]):s.insAtRightEnd(n.parent):(i=s.offset().left,e.seek(i,s))},t.offset=function(){var t=this,e=t.jQ.removeClass("mq-cursor").offset();return t.jQ.addClass("mq-cursor"),e},t.unwrapGramp=function(){var t=this.parent.parent,e=t.parent,n=t[Ct],i=this,s=t[Qt];if(t.disown().eachChild(function(i){i.isEmpty()||(i.children().adopt(e,s,n).each(function(e){e.jQ.insertBefore(t.jQ.first())}),s=i.ends[Ct])}),!this[Ct])if(this[Qt])this[Ct]=this[Qt][Ct];else for(;!this[Ct];){if(this.parent=this.parent[Ct],!this.parent){this[Ct]=t[Ct],this.parent=e;break}this[Ct]=this.parent.ends[Qt]}this[Ct]?this.insLeftOf(this[Ct]):this.insAtRightEnd(e),t.jQ.remove(),t[Qt].siblingDeleted&&t[Qt].siblingDeleted(i.options,Ct),t[Ct].siblingDeleted&&t[Ct].siblingDeleted(i.options,Qt)},t.startSelection=function(){var t,e=this.anticursor=St.copy(this),n=e.ancestors={};for(t=e;t.parent;t=t.parent)n[t.parent.id]=t},t.endSelection=function(){delete this.anticursor},t.select=function(){var t,e,n,i,r,o,a,l=this.anticursor;if(this[Qt]===l[Qt]&&this.parent===l.parent)return!1;for(t=this;t.parent;t=t.parent)if(t.parent.id in l.ancestors){e=t.parent;break}if(s("cursor and anticursor in the same tree",e),n=l.ancestors[e.id],o=Ct,t[Qt]!==n)for(a=t;a;a=a[Ct])if(a[Ct]===n[Ct]){o=Qt,i=t,r=n;break}return o===Ct&&(i=n,r=t),i instanceof St&&(i=i[Ct]),r instanceof St&&(r=r[Qt]),this.hide().selection=e.selectChildren(i,r),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[Qt]=this.selection.ends[Qt][Qt],this[Ct]=this.selection.ends[Ct][Ct],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[Qt]=t.ends[Qt][Qt],this[Ct]=t.ends[Ct][Ct],delete this.selection),t}}),zt=jt(Et,function(t,e){t.init=function(){e.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),e.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(t){return this.fold("",function(e,n){return e+n[t]()})}}),Rt=jt(function(t){t.init=function(t,e,n){this.id=t.id,this.data={},this.root=t,this.container=e,this.options=n,t.controller=this,this.cursor=t.cursor=It(t,n)},t.handle=function(t,e){var n,i=this.options.handlers;i&&i.fns[t]&&(n=i.APIClasses[this.KIND_OF_MQ](this),e===Qt||e===Ct?i.fns[t](e,n):i.fns[t](n))};var e=[];this.onNotify=function(t){e.push(t)},t.notify=function(){for(var t=0;t<e.length;t+=1)e[t].apply(this.cursor,arguments);return this}}),Mt={},$t=jt(),Bt={},Ft=jt(),Nt={};l.prototype=Ft.p,l.interfaceVersion=function(t){if(1!==t)throw"Only interface version 1 supported. You specified: "+t;return a=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')},a(),l},l.getInterface=c,g=c.MIN=1,v=c.MAX=2,l.noConflict=function(){return window.MathQuill=b,l},b=window.MathQuill,window.MathQuill=l,w=jt(function(t,e,n){function i(t,e){throw t=t?"'"+t+"'":"EOF","Parse Error: "+e+" at "+t}var r,o,a,l,c,u,h,f,d,p,m,g,v;t.init=function(t){this._=t},t.parse=function(t){function e(t,e){return e}return this.skip(v)._(""+t,e,i)},t.or=function(t){s("or is passed a parser",t instanceof n);var e=this;return n(function(n,i,s){function r(e){return t._(n,i,s)}return e._(n,i,r)})},t.then=function(t){var e=this;return n(function(i,r,o){function a(e,i){var a=t instanceof n?t:t(i);return s("a parser is returned",a instanceof n),a._(e,r,o)}return e._(i,a,o)})},t.many=function(){var t=this;return n(function(e,n,i){function s(t,n){return e=t,o.push(n),!0}function r(){return!1}for(var o=[];t._(e,s,r););return n(e,o)})},t.times=function(t,e){arguments.length<2&&(e=t);var i=this;return n(function(n,s,r){function o(t,e){return h.push(e),n=t,!0}function a(t,e){return c=e,n=t,!1}function l(t,e){return!1}var c,u,h=[],f=!0;for(u=0;t>u;u+=1)if(f=i._(n,o,a),!f)return r(n,c);for(;e>u&&f;u+=1)f=i._(n,o,l);return s(n,h)})},t.result=function(t){return this.then(a(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var e=this;return e.times(t).then(function(t){return e.many().map(function(e){return t.concat(e)})})},t.map=function(t){return this.then(function(e){return a(t(e))})},t.skip=function(t){return this.then(function(e){return t.result(e)})},r=this.string=function(t){var e=t.length,i="expected '"+t+"'";return n(function(n,s,r){var o=n.slice(0,e);return o===t?s(n.slice(e),o):r(n,i)})},o=this.regex=function(t){s("regexp parser is anchored","^"===t.toString().charAt(1));var e="expected "+t;return n(function(n,i,s){var r,o=t.exec(n);return o?(r=o[0],i(n.slice(r.length),r)):s(n,e)})},a=n.succeed=function(t){return n(function(e,n){return n(e,t)})},l=n.fail=function(t){return n(function(e,n,i){return i(e,t)})},c=n.letter=o(/^[a-z]/i),u=n.letters=o(/^[a-z]*/i),h=n.digit=o(/^[0-9]/),f=n.digits=o(/^[0-9]*/),d=n.whitespace=o(/^\s+/),p=n.optWhitespace=o(/^\s*/),m=n.any=n(function(t,e,n){return t?e(t.slice(1),t.charAt(0)):n(t,"expected any character")}),g=n.all=n(function(t,e,n){return e("",t)}),v=n.eof=n(function(t,e,n){return t?n(t,"expected EOF"):e(t,t)})}),x=function(){function e(t){var e,i=t.which||t.keyCode,s=n[i],r=[];return t.ctrlKey&&r.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&r.push("Meta"),t.altKey&&r.push("Alt"),t.shiftKey&&r.push("Shift"),e=s||String.fromCharCode(i),r.length||s?(r.push(e),r.join("-")):e}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,i){function s(t){x=t,clearTimeout(p),p=setTimeout(t)}function r(e){x(),x=t,clearTimeout(p),b.val(e),e&&b[0].select&&b[0].select(),m=!!e}function o(){var t=b[0];return"selectionStart"in t&&t.selectionStart!==t.selectionEnd}function a(){i.keystroke(e(g),g)}function l(e){g=e,v=null,m&&s(function(e){e&&"focusout"===e.type||!b[0].select||b[0].select(),x=t,clearTimeout(p)}),a()}function c(t){g&&v&&a(),v=t,s(u)}function u(){if(!o()){var t=b.val();1===t.length?(b.val(""),i.typedText(t)):t&&b[0].select&&b[0].select()}}function h(){g=v=null}function f(t){b.focus(),s(d)}function d(){var t=b.val();b.val(""),t&&i.paste(t)}var p,m,g=null,v=null,b=wt(n),w=wt(i.container||b),x=t;return w.bind("keydown keypress input keyup focusout paste",function(t){x(t)}),m=!1,w.bind({keydown:l,keypress:c,focusout:h,paste:f}),{select:r}}}(),Rt.open(function(t,e){t.exportText=function(){return this.root.foldChildren("",function(t,e){return t+e.text()})}}),Rt.open(function(t){t.focusBlurEvents=function(){function t(){clearTimeout(n),r.selection&&r.selection.jQ.addClass("mq-blur"),e()}function e(){r.hide().parent.blur(),i.container.removeClass("mq-focused"),_t(window).off("blur",t)}var n,i=this,s=i.root,r=i.cursor;i.textarea.focus(function(){i.blurred=!1,clearTimeout(n),i.container.addClass("mq-focused"),r.parent||r.insAtRightEnd(s),r.selection?(r.selection.jQ.removeClass("mq-blur"),i.selectionChanged()):r.show()}).blur(function(){i.blurred=!0,n=setTimeout(function(){s.postOrder("intentionalBlur"),r.clearSelection().endSelection(),e()}),_t(window).on("blur",t)}),i.blurred=!0,r.hide().parent.blur()}}),Rt.open(function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}}),Dt.open(function(t){t.keystroke=function(t,e,n){var i=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(Qt);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(Ct,t,e);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(Qt,t,e);case"End":n.notify("move").cursor.insAtRightEnd(i.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;i[Ct];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[Ct]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;i[Qt];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[Qt]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[Qt])for(;i[Qt];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[Ct])for(;i[Ct];)n.selectRight();else n.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(Ct);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[Qt];)n.selectLeft();break;default:return}e.preventDefault(),n.scrollHoriz()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){s("overridden or never called on this node")}}),Rt.open(function(t){function e(t,e){var n=t.notify("upDown").cursor,i=e+"Into",s=e+"OutOf";return n[Ct][i]?n.insAtLeftEnd(n[Ct][i]):n[Qt][i]?n.insAtRightEnd(n[Qt][i]):n.parent.bubble(function(t){var e=t[s];return(!e||("function"==typeof e&&(e=t[s](n)),e instanceof Dt&&n.jumpUpDown(t,e),e===!0))&&void 0}),t}this.onNotify(function(t){("move"===t||"upDown"===t)&&this.show().clearSelection()}),t.escapeDir=function(t,e,n){r(t);var i=this.cursor;return i.parent!==this.root&&n.preventDefault(),i.parent!==this.root?(i.parent.moveOutOf(t,i),this.notify("move")):void 0},Bt.leftRightIntoCmdGoes=function(t){if(t&&"up"!==t&&"down"!==t)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},t.moveDir=function(t){r(t);var e=this.cursor,n=e.options.leftRightIntoCmdGoes;return e.selection?e.insDirOf(t,e.selection.ends[t]):e[t]?e[t].moveTowards(t,e,n):e.parent.moveOutOf(t,e,n),this.notify("move")},t.moveLeft=function(){return this.moveDir(Qt)},t.moveRight=function(){return this.moveDir(Ct)},t.moveUp=function(){return e(this,"up")},t.moveDown=function(){return e(this,"down")},this.onNotify(function(t){"upDown"!==t&&(this.upDownCache={})}),this.onNotify(function(t){"edit"===t&&this.show().deleteSelection()}),t.deleteDir=function(t){var e,n;return r(t),e=this.cursor,n=e.selection,this.notify("edit"),n||(e[t]?e[t].deleteTowards(t,e):e.parent.deleteOutOf(t,e)),e[Qt].siblingDeleted&&e[Qt].siblingDeleted(e.options,Ct),e[Ct].siblingDeleted&&e[Ct].siblingDeleted(e.options,Qt),e.parent.bubble("reflow"),this},t.ctrlDeleteDir=function(t){r(t);var e=this.cursor;return!e[Qt]||e.selection?ctrlr.deleteDir():(this.notify("edit"),Et(e.parent.ends[Qt],e[Qt]).remove(),e.insAtDirEnd(Qt,e.parent),e[Qt].siblingDeleted&&e[Qt].siblingDeleted(e.options,Ct),e[Ct].siblingDeleted&&e[Ct].siblingDeleted(e.options,Qt),e.parent.bubble("reflow"),this)},t.backspace=function(){return this.deleteDir(Qt)},t.deleteForward=function(){return this.deleteDir(Ct)},this.onNotify(function(t){"select"!==t&&this.endSelection()}),t.selectDir=function(t){var e,n=this.notify("select").cursor,i=n.selection;r(t),n.anticursor||n.startSelection(),e=n[t],e?i&&i.ends[t]===e&&n.anticursor[-t]!==e?e.unselectInto(t,n):e.selectTowards(t,n):n.parent.selectOutOf(t,n),n.clearSelection(),n.select()||n.show()},t.selectLeft=function(){return this.selectDir(Qt)},t.selectRight=function(){return this.selectDir(Ct)}}),q=function(){function t(t){var e=Q();return t.adopt(e,0,0),e}function e(t){var e,n=t[0]||Q();for(e=1;e<t.length;e+=1)t[e].children().adopt(n,n.ends[Ct],0);return n}var n=w.string,i=w.regex,s=w.letter,r=w.any,o=w.optWhitespace,a=w.succeed,l=w.fail,c=s.map(function(t){return z(t)}),u=i(/^[^${}\\_^]/).map(function(t){return T(t)}),h=i(/^[^\\a-eg-zA-Z]/).or(n("\\").then(i(/^[a-z]+/i).or(i(/^\s+/).result(" ")).or(r))).then(function(t){var e=At[t];return e?e(t).parser():l("unknown command: \\"+t)}),f=h.or(c).or(u),d=n("{").then(function(){return m}).skip(n("}")),p=o.then(d.or(f.map(t))),m=p.many().map(e).skip(o),g=n("[").then(p.then(function(t){return"]"!==t.join("latex")?a(t):l()}).many().map(e).skip(o)).skip(n("]")),v=m;return v.block=p,v.optBlock=g,v}(),Rt.open(function(t,e){t.exportLatex=function(){
return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.writeLatex=function(t){var e,n=this.notify("edit").cursor,i=w.all,s=w.eof,r=q.skip(s).or(i.result(!1)).parse(t);return r&&!r.isEmpty()&&(r.children().adopt(n.parent,n[Qt],n[Ct]),e=r.jQize(),e.insertBefore(n.jQ),n[Qt]=r.ends[Ct],r.finalizeInsert(n.options,n),r.ends[Ct][Ct].siblingCreated&&r.ends[Ct][Ct].siblingCreated(n.options,Qt),r.ends[Qt][Qt].siblingCreated&&r.ends[Qt][Qt].siblingCreated(n.options,Ct),n.parent.bubble("reflow")),this},t.renderLatexMath=function(t){var e,n,i=this.root,s=this.cursor,r=w.all,o=w.eof,a=q.skip(o).or(r.result(!1)).parse(t);i.eachChild("postOrder","dispose"),i.ends[Qt]=i.ends[Ct]=0,a&&a.children().adopt(i,0,0),e=i.jQ,a?(n=a.join("html"),e.html(n),i.jQize(e.children()),i.finalizeInsert(s.options)):e.empty(),delete s.selection,s.insAtRightEnd(i)},t.renderLatexText=function(t){var e,n,i,s,r,o,a,l,c,u,h=this.root,f=this.cursor;if(h.jQ.children().slice(1).remove(),h.eachChild("postOrder","dispose"),h.ends[Qt]=h.ends[Ct]=0,delete f.selection,f.show().insAtRightEnd(h),e=w.regex,n=w.string,i=w.eof,s=w.all,r=n("$").then(q).skip(n("$").or(i)).map(function(t){var e,n=D(f);return n.createBlocks(),e=n.ends[Qt],t.children().adopt(e,0,0),n}),o=n("\\$").result("$"),a=o.or(e(/^[^$]/)).map(T),l=r.or(a).many(),c=l.skip(i).or(s.result(!1)).parse(t)){for(u=0;u<c.length;u+=1)c[u].adopt(h,h.ends[Ct],0);h.jQize().appendTo(h.jQ),h.finalizeInsert(f.options)}}}),Rt.open(function(e){e.delegateMouseEvents=function(){var e=this.root.jQ;this.container.bind("mousedown.mathquill",function(n){function i(t){o=_t(t.target)}function s(t){u.anticursor||u.startSelection(),c.seek(o,t.pageX,t.pageY).cursor.select(),o=m}function r(t){u.blink=h,u.selection||(c.editable?u.show():f.detach()),a.unbind("mousemove",i),_t(t.target.ownerDocument).unbind("mousemove",s).unbind("mouseup",r)}var o,a=_t(n.target).closest(".mq-root-block"),l=Dt.byId[a.attr(qt)||e.attr(qt)],c=l.controller,u=c.cursor,h=u.blink,f=c.textareaSpan,d=c.textarea;c.blurred&&(c.editable||a.prepend(f),d.focus()),n.preventDefault(),n.target.unselectable=!0,u.blink=t,c.seek(_t(n.target),n.pageX,n.pageY).cursor.startSelection(),a.mousemove(i),_t(n.target.ownerDocument).mousemove(s).mouseup(r)})}}),Rt.open(function(t){t.seek=function(t,e,n){var i,r,o,a=this.notify("select").cursor;return t&&(i=t.attr(qt)||t.attr(xt),i||(r=t.parent(),i=r.attr(qt)||r.attr(xt))),o=i?Dt.byId[i]:this.root,s("nodeId is the id of some Node that exists",o),a.clearSelection().show(),o.seek(e,a),this.scrollHoriz(),this}}),Rt.open(function(t){t.scrollHoriz=function(){var t,e,n,i,s,r=this.cursor,o=r.selection,a=this.root.jQ[0].getBoundingClientRect();if(o)if(n=o.jQ[0].getBoundingClientRect(),i=n.left-(a.left+20),s=n.right-(a.right-20),o.ends[Qt]===r[Ct])if(0>i)e=i;else{if(!(s>0))return;e=n.left-s<a.left+20?i:s}else if(s>0)e=s;else{if(!(0>i))return;e=n.right-i>a.right-20?s:i}else if(t=r.jQ[0].getBoundingClientRect().left,t>a.right-20)e=t-(a.right-20);else{if(!(t<a.left+20))return;e=t-(a.left+20)}this.root.jQ.stop().animate({scrollLeft:"+="+e},100)}}),Rt.open(function(t){$t.p.substituteTextarea=function(){return _t("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},t.createTextarea=function(){var t,e=this.textareaSpan=_t('<span class="mq-textarea"></span>'),n=this.options.substituteTextarea();if(!n.nodeType)throw"substituteTextarea() must return a DOM element, got "+n;n=this.textarea=_t(n).appendTo(e),t=this,t.cursor.selectionChanged=function(){t.selectionChanged()},t.container.bind("copy",function(){t.setTextareaSelection()})},t.selectionChanged=function(){var t=this;J(t.container[0]),t.textareaSelectionTimeout===m&&(t.textareaSelectionTimeout=setTimeout(function(){t.setTextareaSelection()}))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=m;var t="";this.cursor.selection&&(t=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){function t(){s.detach(),e.blurred=!0}var e=this,n=(e.root,e.cursor),i=e.textarea,s=e.textareaSpan;this.container.prepend('<span class="mq-selectable">$'+e.exportLatex()+"$</span>"),e.blurred=!0,i.bind("cut paste",!1).focus(function(){e.blurred=!1}).blur(function(){n.selection&&n.selection.clear(),setTimeout(t)}),e.selectFn=function(t){i.val(t),t&&i.select()}},t.editablesTextareaEvents=function(){var t=this,e=(t.root,t.cursor),n=t.textarea,i=t.textareaSpan,s=x(n,this);this.selectFn=function(t){s.select(t)},this.container.prepend(i).on("cut",function(n){e.selection&&setTimeout(function(){t.notify("edit"),e.parent.bubble("reflow")})}),this.focusBlurEvents()},t.typedText=function(t){if("\n"===t)return this.handle("enter");var e=this.notify().cursor;e.parent.write(e,t),this.scrollHoriz()},t.paste=function(t){this.options.statelessClipboard&&(t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}"),this.writeLatex(t).cursor.show()}}),y=jt(Dt,function(t,e){t.finalizeInsert=function(t,e){var n=this;n.postOrder("finalizeTree",t),n.postOrder("contactWeld",e),n.postOrder("blur"),n.postOrder("reflow"),n[Ct].siblingCreated&&n[Ct].siblingCreated(t,Qt),n[Qt].siblingCreated&&n[Qt].siblingCreated(t,Ct),n.bubble("reflow")}}),O=jt(y,function(t,e){t.init=function(t,n,i){var s=this;e.init.call(s),s.ctrlSeq||(s.ctrlSeq=t),n&&(s.htmlTemplate=n),i&&(s.textTemplate=i)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,function(t,e){return t&&e.isEmpty()})},t.parser=function(){var t=q.block,e=this;return t.times(e.numBlocks()).map(function(t){e.blocks=t;for(var n=0;n<t.length;n+=1)t[n].adopt(e,e.ends[Ct],0);return e})},t.createLeftOf=function(t){var n=this,i=n.replacedFragment;n.createBlocks(),e.createLeftOf.call(n,t),i&&(i.adopt(n.ends[Qt],0,0),i.jQ.appendTo(n.ends[Qt].jQ)),n.finalizeInsert(t.options),n.placeCursor(t)},t.createBlocks=function(){var t,e,n=this,i=n.numBlocks(),s=n.blocks=Array(i);for(t=0;i>t;t+=1)e=s[t]=Q(),e.adopt(n,n.ends[Ct],0)},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[Qt],function(t,e){return t.isEmpty()?t:e}))},t.moveTowards=function(t,e,n){var i=n&&this[n+"Into"];e.insAtDirEnd(-t,i||this.ends[-t])},t.deleteTowards=function(t,e){this.isEmpty()?e[t]=this.remove()[t]:this.moveTowards(t,e,null)},t.selectTowards=function(t,e){e[-t]=this,e[t]=this[t]},t.selectChildren=function(){return zt(this,this)},t.unselectInto=function(t,e){e.insAtDirEnd(-t,e.anticursor.ancestors[this.id])},t.seek=function(t,e){function n(t){var e={};return e[Qt]=t.jQ.offset().left,e[Ct]=e[Qt]+t.jQ.outerWidth(),e}var i,s=this,r=n(s);return t<r[Qt]?e.insLeftOf(s):t>r[Ct]?e.insRightOf(s):(i=r[Qt],void s.eachChild(function(o){var a=n(o);return t<a[Qt]?(t-i<a[Qt]-t?o[Qt]?e.insAtRightEnd(o[Qt]):e.insLeftOf(s):e.insAtLeftEnd(o),!1):t>a[Ct]?void(o[Ct]?i=a[Ct]:r[Ct]-t<t-a[Ct]?e.insRightOf(s):e.insAtRightEnd(o)):(o.seek(t,e),!1)}))},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var t,e,n,i=this,r=i.blocks,o=" mathquill-command-id="+i.id,a=i.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(s("no unmatched angle brackets",a.join("")===this.htmlTemplate),t=0,e=a[0];e;t+=1,e=a[t])if("/>"===e.slice(-2))a[t]=e.slice(0,-2)+o+"/>";else if("<"===e.charAt(0)){s("not an unmatched top-level close tag","/"!==e.charAt(1)),a[t]=e.slice(0,-1)+o+">",n=1;do t+=1,e=a[t],s("no missing close tags",e),"</"===e.slice(0,2)?n-=1:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(n+=1);while(n>0)}return a.join("").replace(/>&(\d+)/g,function(t,e){return" mathquill-block-id="+r[e].id+">"+r[e].join("html")})},t.latex=function(){return this.foldChildren(this.ctrlSeq,function(t,e){return t+"{"+(e.latex()||" ")+"}"})},t.textTemplate=[""],t.text=function(){var t=this,e=0;return t.foldChildren(t.textTemplate[e],function(n,i){e+=1;var s=i.text();return n&&"("===t.textTemplate[e]&&"("===s[0]&&")"===s.slice(-1)?n+s.slice(1,-1)+t.textTemplate[e]:n+i.text()+(t.textTemplate[e]||"")})}}),k=jt(O,function(e,n){e.init=function(t,e,i){i||(i=t&&t.length>1?t.slice(1):t),n.init.call(this,t,e,[i])},e.parser=function(){return w.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(t){t.remove()},e.createBlocks=t,e.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ),e[-t]=this,e[t]=this[t]},e.deleteTowards=function(t,e){e[t]=this.remove()[t]},e.seek=function(t,e){t-this.jQ.offset().left<this.jQ.outerWidth()/2?e.insLeftOf(this):e.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate},e.placeCursor=t,e.isEmpty=function(){return!0}}),T=jt(k,function(t,e){t.init=function(t,n){e.init.call(this,t,"<span>"+(n||t)+"</span>")}}),j=jt(k,function(t,e){t.init=function(t,n,i){e.init.call(this,t,'<span class="mq-binary-operator">'+n+"</span>",i)}}),Q=jt(y,function(t,e){t.join=function(t){return this.foldChildren("",function(e,n){return e+n[t]()})},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[Qt]===this.ends[Ct]&&0!==this.ends[Qt]?this.ends[Qt].text():this.join("text")},t.keystroke=function(t,n,i){return!i.options.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):(n.preventDefault(),void i.escapeDir("Shift-Spacebar"===t?Qt:Ct,t,n))},t.moveOutOf=function(t,e,n){var i=n&&this.parent[n+"Into"];!i&&this[t]?e.insAtDirEnd(-t,this[t]):e.insDirOf(t,this.parent)},t.selectOutOf=function(t,e){e.insDirOf(t,this.parent)},t.deleteOutOf=function(t,e){e.unwrapGramp()},t.seek=function(t,e){var n=this.ends[Ct];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return e.insAtRightEnd(this);if(t<this.ends[Qt].jQ.offset().left)return e.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[Qt];return n.seek(t,e)},t.chToCmd=function(t){var e;return t.match(/^[a-eg-zA-Z]$/)?z(t):/^\d$/.test(t)?L(t):(e=Lt[t]||At[t])?e(t):T(t)},t.write=function(t,e){var n=this.chToCmd(e);t.selection&&n.replaces(t.replaceSelection()),n.createLeftOf(t.show())},t.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},t.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}}),Mt.StaticMath=function(t){return jt(t.AbstractMathQuill,function(e,n){this.RootBlock=Q,e.__mathquillify=function(){return n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},e.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField)},e.latex=function(){var e=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField),e}})},C=jt(Q,u),Mt.MathField=function(e){return jt(e.EditableField,function(e,n){this.RootBlock=C,e.__mathquillify=function(e,i){return this.config(e),i>1&&(this.__controller.root.reflow=t),n.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}})},_=jt(Dt,function(t,e){function n(t){var e,n;return t.jQ[0].normalize(),e=t.jQ[0].firstChild,s("only node in TextBlock span is Text node",3===e.nodeType),n=S(e.data),n.jQadd(e),t.children().disown(),n.adopt(t,0,0)}t.ctrlSeq="\\text",t.replaces=function(t){t instanceof Et?this.replacedText=t.remove().jQ.text():"string"==typeof t&&(this.replacedText=t)},t.jQadd=function(t){e.jQadd.call(this,t),this.ends[Qt]&&this.ends[Qt].jQadd(this.jQ[0].firstChild)},t.createLeftOf=function(t){var n,i=this;if(e.createLeftOf.call(this,t),i[Ct].siblingCreated&&i[Ct].siblingCreated(t.options,Qt),i[Qt].siblingCreated&&i[Qt].siblingCreated(t.options,Ct),i.bubble("reflow"),t.insAtRightEnd(i),i.replacedText)for(n=0;n<i.replacedText.length;n+=1)i.write(t,i.replacedText.charAt(n))},t.parser=function(){var t=this,e=w.string,n=w.regex,i=w.optWhitespace;return i.then(e("{")).then(n(/^[^}]*/)).skip(e("}")).map(function(e){return S(e).adopt(t,0,0),t})},t.textContents=function(){return this.foldChildren("",function(t,e){return t+e.text})},t.text=function(){return'"'+this.textContents()+'"'},t.latex=function(){return"\\text{"+this.textContents()+"}"},t.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},t.moveTowards=function(t,e){e.insAtDirEnd(-t,this)},t.moveOutOf=function(t,e){e.insDirOf(t,this)},t.unselectInto=t.moveTowards,t.selectTowards=O.prototype.selectTowards,t.deleteTowards=O.prototype.deleteTowards,t.selectOutOf=function(t,e){e.insDirOf(t,this)},t.deleteOutOf=function(t,e){this.isEmpty()&&e.insRightOf(this)},t.write=function(t,n){var i,s;t.show().deleteSelection(),"$"!==n?t[Qt]?t[Qt].appendText(n):S(n).createLeftOf(t):this.isEmpty()?(t.insRightOf(this),T("\\$","$").createLeftOf(t)):t[Ct]?t[Qt]?(i=_(),s=this.ends[Qt],s.disown(),s.adopt(i,0,0),t.insLeftOf(this),e.createLeftOf.call(i,t)):t.insLeftOf(this):t.insRightOf(this)},t.seek=function(t,e){var i,s,r,o,a,l,c,u;for(e.hide(),i=n(this),s=this.jQ.width()/this.text.length,r=Math.round((t-this.jQ.offset().left)/s),0>=r?e.insAtLeftEnd(this):r>=i.text.length?e.insAtRightEnd(this):e.insLeftOf(i.splitRight(r)),o=t-e.show().offset().left,a=o&&0>o?Qt:Ct,l=a;e[a]&&o*l>0;)e[a].moveTowards(a,e),l=o,o=t-e.offset().left;-a*l>a*o&&e[-a].moveTowards(-a,e),e.anticursor?e.anticursor.parent===this&&(c=e[Qt]&&e[Qt].text.length,this.anticursorPosition===c?e.anticursor=St.copy(e):(this.anticursorPosition<c?(u=e[Qt].splitRight(this.anticursorPosition),e[Qt]=u):u=e[Ct].splitRight(this.anticursorPosition-c),e.anticursor=St(this,u[Qt],u))):this.anticursorPosition=e[Qt]&&e[Qt].text.length},t.blur=function(){Q.prototype.blur.call(this),n(this)},t.focus=Q.prototype.focus}),S=jt(Dt,function(t,e){function n(t,e){return e.charAt(t===Qt?0:-1+e.length)}t.init=function(t){e.init.call(this),this.text=t},t.jQadd=function(t){this.dom=t,this.jQ=_t(t)},t.jQize=function(){return this.jQadd(document.createTextNode(this.text))},t.appendText=function(t){this.text+=t,this.dom.appendData(t)},t.prependText=function(t){this.text=t+this.text,this.dom.insertData(0,t)},t.insTextAtDirEnd=function(t,e){r(e),e===Ct?this.appendText(t):this.prependText(t)},t.splitRight=function(t){var e=S(this.text.slice(t)).adopt(this.parent,this,this[Ct]);return e.jQadd(this.dom.splitText(t)),this.text=this.text.slice(0,t),e},t.moveTowards=function(t,e){var i,s;return r(t),i=n(-t,this.text),s=this[-t],s?s.insTextAtDirEnd(i,t):S(i).createDir(-t,e),this.deleteTowards(t,e)},t.latex=function(){return this.text},t.deleteTowards=function(t,e){this.text.length>1?t===Ct?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),e[t]=this[t])},t.selectTowards=function(t,e){var i,s,o,a;return r(t),i=e.anticursor,s=n(-t,this.text),i[t]===this?(o=S(s).createDir(t,e),i[t]=o,e.insDirOf(t,o)):(a=this[-t],a?a.insTextAtDirEnd(s,t):(o=S(s).createDir(-t,e),o.jQ.insDirOf(-t,e.selection.jQ)),1===this.text.length&&i[-t]===this&&(i[-t]=this[-t])),this.deleteTowards(t,e)}}),Lt.$=At.text=At.textnormal=At.textrm=At.textup=At.textmd=_,At.em=At.italic=At.italics=At.emph=At.textit=At.textsl=h("\\textit","i",'class="mq-text-mode"'),At.strong=At.bold=At.textbf=h("\\textbf","b",'class="mq-text-mode"'),At.sf=At.textsf=h("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),At.tt=At.texttt=h("\\texttt","span",'class="mq-monospace mq-text-mode"'),At.textsc=h("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),At.uppercase=h("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),At.lowercase=h("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"'),D=jt(O,function(t,e){t.init=function(t){e.init.call(this,"$"),this.cursor=t},t.htmlTemplate='<span class="mq-math-mode">&0</span>',t.createBlocks=function(){e.createBlocks.call(this),this.ends[Qt].cursor=this.cursor,this.ends[Qt].write=function(t,e){"$"!==e?Q.prototype.write.call(this,t,e):this.isEmpty()?(t.insRightOf(this.parent),this.parent.deleteTowards(dir,t),T("\\$","$").createLeftOf(t.show())):t[Ct]?t[Qt]?Q.prototype.write.call(this,t,e):t.insLeftOf(this.parent):t.insRightOf(this.parent)}},t.latex=function(){return"$"+this.ends[Qt].latex()+"$"}}),E=jt(C,function(t,e){t.keystroke=function(t){return"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):void 0},t.write=function(t,e){if(t.show().deleteSelection(),"$"===e)D(t).createLeftOf(t);else{var n;"<"===e?n="&lt;":">"===e&&(n="&gt;"),T(e,n).createLeftOf(t)}}}),Mt.TextField=function(t){return jt(t.EditableField,function(t,e){this.RootBlock=E,t.__mathquillify=function(){return e.__mathquillify.call(this,"mq-editable-field mq-text-mode")},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexText(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}})},A=Lt["\\"]=jt(O,function(t,e){t.ctrlSeq="\\",t.replaces=function(t){this._replacedFragment=t.disown(),this.isEmpty=function(){return!1}},t.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',t.textTemplate=["\\"],t.createBlocks=function(){e.createBlocks.call(this),this.ends[Qt].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[Qt].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[Qt].write=function(t,e){t.show().deleteSelection(),e.match(/[a-z]/i)?T(e).createLeftOf(t):(this.parent.renderCommand(t),"\\"===e&&this.isEmpty()||this.parent.parent.write(t,e))},this.ends[Qt].keystroke=function(t,n,i){return"Tab"===t||"Enter"===t||"Spacebar"===t?(this.parent.renderCommand(i.cursor),void n.preventDefault()):e.keystroke.apply(this,arguments)}},t.createLeftOf=function(t){if(e.createLeftOf.call(this,t),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",function(t){return _t(t.target=n).trigger(t),!1}).insertBefore(this.jQ).add(this.jQ)}},t.latex=function(){return"\\"+this.ends[Qt].latex()+" "},t.renderCommand=function(t){var e,n;this.jQ=this.jQ.last(),this.remove(),this[Ct]?t.insLeftOf(this[Ct]):t.insAtRightEnd(this.parent),e=this.ends[Qt].latex(),e||(e=" "),n=At[e],n?(n=n(e),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(t)):(n=_(),n.replaces(e),n.createLeftOf(t),t.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}}),At.notin=At.cong=At.equiv=At.oplus=At.otimes=jt(j,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),At["≠"]=At.ne=At.neq=i(j,"\\ne ","&ne;"),At.ast=At.star=At.loast=At.lowast=i(j,"\\ast ","&lowast;"),At.therefor=At.therefore=i(j,"\\therefore ","&there4;"),At.cuz=At.because=i(j,"\\because ","&#8757;"),At.prop=At.propto=i(j,"\\propto ","&prop;"),At["≈"]=At.asymp=At.approx=i(j,"\\approx ","&asymp;"),At.isin=At["in"]=i(j,"\\in ","&isin;"),At.ni=At.contains=i(j,"\\ni ","&ni;"),At.notni=At.niton=At.notcontains=At.doesnotcontain=i(j,"\\not\\ni ","&#8716;"),At.sub=At.subset=i(j,"\\subset ","&sub;"),At.sup=At.supset=At.superset=i(j,"\\supset ","&sup;"),At.nsub=At.notsub=At.nsubset=At.notsubset=i(j,"\\not\\subset ","&#8836;"),At.nsup=At.notsup=At.nsupset=At.notsupset=At.nsuperset=At.notsuperset=i(j,"\\not\\supset ","&#8837;"),At.sube=At.subeq=At.subsete=At.subseteq=i(j,"\\subseteq ","&sube;"),At.supe=At.supeq=At.supsete=At.supseteq=At.supersete=At.superseteq=i(j,"\\supseteq ","&supe;"),At.nsube=At.nsubeq=At.notsube=At.notsubeq=At.nsubsete=At.nsubseteq=At.notsubsete=At.notsubseteq=i(j,"\\not\\subseteq ","&#8840;"),At.nsupe=At.nsupeq=At.notsupe=At.notsupeq=At.nsupsete=At.nsupseteq=At.notsupsete=At.notsupseteq=At.nsupersete=At.nsuperseteq=At.notsupersete=At.notsuperseteq=i(j,"\\not\\supseteq ","&#8841;"),At.N=At.naturals=At.Naturals=i(T,"\\mathbb{N}","&#8469;"),At.P=At.primes=At.Primes=At.projective=At.Projective=At.probability=At.Probability=i(T,"\\mathbb{P}","&#8473;"),At.Z=At.integers=At.Integers=i(T,"\\mathbb{Z}","&#8484;"),At.Q=At.rationals=At.Rationals=i(T,"\\mathbb{Q}","&#8474;"),At.R=At.reals=At.Reals=i(T,"\\mathbb{R}","&#8477;"),At.C=At.complex=At.Complex=At.complexes=At.Complexes=At.complexplane=At.Complexplane=At.ComplexPlane=i(T,"\\mathbb{C}","&#8450;"),At.H=At.Hamiltonian=At.quaternions=At.Quaternions=i(T,"\\mathbb{H}","&#8461;"),At.quad=At.emsp=i(T,"\\quad ","    "),At.qquad=i(T,"\\qquad ","        "),At.diamond=i(T,"\\diamond ","&#9671;"),At.bigtriangleup=i(T,"\\bigtriangleup ","&#9651;"),At.ominus=i(T,"\\ominus ","&#8854;"),At.uplus=i(T,"\\uplus ","&#8846;"),At.bigtriangledown=i(T,"\\bigtriangledown ","&#9661;"),At.sqcap=i(T,"\\sqcap ","&#8851;"),At.triangleleft=i(T,"\\triangleleft ","&#8882;"),At.sqcup=i(T,"\\sqcup ","&#8852;"),At.triangleright=i(T,"\\triangleright ","&#8883;"),At.odot=At.circledot=i(T,"\\odot ","&#8857;"),At.bigcirc=i(T,"\\bigcirc ","&#9711;"),At.dagger=i(T,"\\dagger ","&#0134;"),At.ddagger=i(T,"\\ddagger ","&#135;"),At.wr=i(T,"\\wr ","&#8768;"),At.amalg=i(T,"\\amalg ","&#8720;"),At.models=i(T,"\\models ","&#8872;"),At.prec=i(T,"\\prec ","&#8826;"),At.succ=i(T,"\\succ ","&#8827;"),At.preceq=i(T,"\\preceq ","&#8828;"),At.succeq=i(T,"\\succeq ","&#8829;"),At.simeq=i(T,"\\simeq ","&#8771;"),At.mid=i(T,"\\mid ","&#8739;"),At.ll=i(T,"\\ll ","&#8810;"),At.gg=i(T,"\\gg ","&#8811;"),At.parallel=i(T,"\\parallel ","&#8741;"),At.nparallel=i(T,"\\nparallel ","&#8742;"),At.bowtie=i(T,"\\bowtie ","&#8904;"),At.sqsubset=i(T,"\\sqsubset ","&#8847;"),At.sqsupset=i(T,"\\sqsupset ","&#8848;"),At.smile=i(T,"\\smile ","&#8995;"),At.sqsubseteq=i(T,"\\sqsubseteq ","&#8849;"),At.sqsupseteq=i(T,"\\sqsupseteq ","&#8850;"),At.doteq=i(T,"\\doteq ","&#8784;"),At.frown=i(T,"\\frown ","&#8994;"),At.vdash=i(T,"\\vdash ","&#8870;"),At.dashv=i(T,"\\dashv ","&#8867;"),At.nless=i(T,"\\nless ","&#8814;"),At.ngtr=i(T,"\\ngtr ","&#8815;"),At.longleftarrow=i(T,"\\longleftarrow ","&#8592;"),At.longrightarrow=i(T,"\\longrightarrow ","&#8594;"),At.Longleftarrow=i(T,"\\Longleftarrow ","&#8656;"),At.Longrightarrow=i(T,"\\Longrightarrow ","&#8658;"),At.longleftrightarrow=i(T,"\\longleftrightarrow ","&#8596;"),At.updownarrow=i(T,"\\updownarrow ","&#8597;"),At.Longleftrightarrow=i(T,"\\Longleftrightarrow ","&#8660;"),At.Updownarrow=i(T,"\\Updownarrow ","&#8661;"),At.mapsto=i(T,"\\mapsto ","&#8614;"),At.nearrow=i(T,"\\nearrow ","&#8599;"),At.hookleftarrow=i(T,"\\hookleftarrow ","&#8617;"),At.hookrightarrow=i(T,"\\hookrightarrow ","&#8618;"),At.searrow=i(T,"\\searrow ","&#8600;"),At.leftharpoonup=i(T,"\\leftharpoonup ","&#8636;"),At.rightharpoonup=i(T,"\\rightharpoonup ","&#8640;"),At.swarrow=i(T,"\\swarrow ","&#8601;"),At.leftharpoondown=i(T,"\\leftharpoondown ","&#8637;"),At.rightharpoondown=i(T,"\\rightharpoondown ","&#8641;"),At.nwarrow=i(T,"\\nwarrow ","&#8598;"),At.ldots=i(T,"\\ldots ","&#8230;"),At.cdots=i(T,"\\cdots ","&#8943;"),At.vdots=i(T,"\\vdots ","&#8942;"),At.ddots=i(T,"\\ddots ","&#8945;"),At.surd=i(T,"\\surd ","&#8730;"),At.triangle=i(T,"\\triangle ","&#9651;"),At.ell=i(T,"\\ell ","&#8467;"),At.top=i(T,"\\top ","&#8868;"),At.flat=i(T,"\\flat ","&#9837;"),At.natural=i(T,"\\natural ","&#9838;"),At.sharp=i(T,"\\sharp ","&#9839;"),At.wp=i(T,"\\wp ","&#8472;"),At.bot=i(T,"\\bot ","&#8869;"),At.clubsuit=i(T,"\\clubsuit ","&#9827;"),At.diamondsuit=i(T,"\\diamondsuit ","&#9826;"),At.heartsuit=i(T,"\\heartsuit ","&#9825;"),At.spadesuit=i(T,"\\spadesuit ","&#9824;"),At.parallelogram=i(T,"\\parallelogram ","&#9649;"),At.square=i(T,"\\square ","&#11036;"),At.oint=i(T,"\\oint ","&#8750;"),At.bigcap=i(T,"\\bigcap ","&#8745;"),At.bigcup=i(T,"\\bigcup ","&#8746;"),At.bigsqcup=i(T,"\\bigsqcup ","&#8852;"),At.bigvee=i(T,"\\bigvee ","&#8744;"),At.bigwedge=i(T,"\\bigwedge ","&#8743;"),At.bigodot=i(T,"\\bigodot ","&#8857;"),At.bigotimes=i(T,"\\bigotimes ","&#8855;"),At.bigoplus=i(T,"\\bigoplus ","&#8853;"),At.biguplus=i(T,"\\biguplus ","&#8846;"),At.lfloor=i(T,"\\lfloor ","&#8970;"),At.rfloor=i(T,"\\rfloor ","&#8971;"),At.lceil=i(T,"\\lceil ","&#8968;"),At.rceil=i(T,"\\rceil ","&#8969;"),At.opencurlybrace=At.lbrace=i(T,"\\lbrace ","{"),At.closecurlybrace=At.rbrace=i(T,"\\rbrace ","}"),At.lbrack=i(T,"["),At.rbrack=i(T,"]"),At["∫"]=At["int"]=At.integral=i(k,"\\int ","<big>&int;</big>"),At.slash=i(T,"/"),At.vert=i(T,"|"),At.perp=At.perpendicular=i(T,"\\perp ","&perp;"),At.nabla=At.del=i(T,"\\nabla ","&nabla;"),At.hbar=i(T,"\\hbar ","&#8463;"),At.AA=At.Angstrom=At.angstrom=i(T,"\\text\\AA ","&#8491;"),At.ring=At.circ=At.circle=i(T,"\\circ ","&#8728;"),At.bull=At.bullet=i(T,"\\bullet ","&bull;"),At.setminus=At.smallsetminus=i(T,"\\setminus ","&#8726;"),At.not=At["¬"]=At.neg=i(T,"\\neg ","&not;"),At["…"]=At.dots=At.ellip=At.hellip=At.ellipsis=At.hellipsis=i(T,"\\dots ","&hellip;"),At.converges=At.darr=At.dnarr=At.dnarrow=At.downarrow=i(T,"\\downarrow ","&darr;"),At.dArr=At.dnArr=At.dnArrow=At.Downarrow=i(T,"\\Downarrow ","&dArr;"),At.diverges=At.uarr=At.uparrow=i(T,"\\uparrow ","&uarr;"),At.uArr=At.Uparrow=i(T,"\\Uparrow ","&uArr;"),At.to=i(j,"\\to ","&rarr;"),At.rarr=At.rightarrow=i(T,"\\rightarrow ","&rarr;"),At.implies=i(j,"\\Rightarrow ","&rArr;"),At.rArr=At.Rightarrow=i(T,"\\Rightarrow ","&rArr;"),At.gets=i(j,"\\gets ","&larr;"),At.larr=At.leftarrow=i(T,"\\leftarrow ","&larr;"),At.impliedby=i(j,"\\Leftarrow ","&lArr;"),At.lArr=At.Leftarrow=i(T,"\\Leftarrow ","&lArr;"),At.harr=At.lrarr=At.leftrightarrow=i(T,"\\leftrightarrow ","&harr;"),At.iff=i(j,"\\Leftrightarrow ","&hArr;"),At.hArr=At.lrArr=At.Leftrightarrow=i(T,"\\Leftrightarrow ","&hArr;"),At.Re=At.Real=At.real=i(T,"\\Re ","&real;"),At.Im=At.imag=At.image=At.imagin=At.imaginary=At.Imaginary=i(T,"\\Im ","&image;"),At.part=At.partial=i(T,"\\partial ","&part;"),At.infty=At.infin=At.infinity=i(T,"\\infty ","&infin;"),At.alef=At.alefsym=At.aleph=At.alephsym=i(T,"\\aleph ","&alefsym;"),At.xist=At.xists=At.exist=At.exists=i(T,"\\exists ","&exist;"),At.and=At.land=At.wedge=i(T,"\\wedge ","&and;"),At.or=At.lor=At.vee=i(T,"\\vee ","&or;"),At.o=At.O=At.empty=At.emptyset=At.oslash=At.Oslash=At.nothing=At.varnothing=i(j,"\\varnothing ","&empty;"),At.cup=At.union=i(j,"\\cup ","&cup;"),At.cap=At.intersect=At.intersection=i(j,"\\cap ","&cap;"),At.deg=At.degree=i(T,"\\degree ","&deg;"),At.ang=At.angle=i(T,"\\angle ","&ang;"),At.measuredangle=i(T,"\\measuredangle ","&#8737;"),L=jt(T,function(t,e){t.createLeftOf=function(t){t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[Qt]instanceof I&&t[Qt].isItalic!==!1||t[Qt]instanceof rt&&t[Qt][Qt]instanceof I&&t[Qt][Qt].isItalic!==!1)?(At._().createLeftOf(t),e.createLeftOf.call(this,t),t.insRightOf(t.parent.parent)):e.createLeftOf.call(this,t)}}),I=jt(k,function(t,e){t.init=function(t,n){e.init.call(this,t,"<var>"+(n||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return!this[Qt]||this[Qt]instanceof I||this[Qt]instanceof j||"\\ "===this[Qt].ctrlSeq||(t="*"+t),!this[Ct]||this[Ct]instanceof j||this[Ct]instanceof rt||(t+="*"),t}}),$t.p.autoCommands={_maxLength:0},Bt.autoCommands=function(t){var e,n,i,s,r;if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(e=t.split(" "),n={},i=0,s=0;s<e.length;s+=1){if(r=e[s],r.length<2)throw'autocommand "'+r+'" not minimum length of 2';if(At[r]===B)throw'"'+r+'" is a built-in operator name';n[r]=1,i=Ot(i,r.length)}return n._maxLength=i,n},z=jt(I,function(t,e){function n(t){return t instanceof k&&!(t instanceof j)}t.init=function(t){return e.init.call(this,this.letter=t)},t.createLeftOf=function(t){var n,i,s,r=t.options.autoCommands,o=r._maxLength;if(o>0){for(n=this.letter,i=t[Qt],s=1;i instanceof z&&o>s;)n=i.letter+n,i=i[Qt],s+=1;for(;n.length;){if(r.hasOwnProperty(n)){for(s=2,i=t[Qt];s<n.length;s+=1,i=i[Qt]);return Et(i,t[Qt]).remove(),t[Qt]=i[Qt],At[n](n).createLeftOf(t)}n=n.slice(1)}}e.createLeftOf.apply(this,arguments)},t.italicize=function(t){return this.isItalic=t,this.jQ.toggleClass("mq-operator-name",!t),this},t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){e!==Qt&&this[Ct]instanceof z||this.autoUnItalicize(t)},t.autoUnItalicize=function(t){var e,i,s,r,o,a,l,c,u,h,f,d=t.autoOperatorNames;if(0!==d._maxLength){for(e=this.letter,i=this[Qt];i instanceof z;i=i[Qt])e=i.letter+e;for(s=this[Ct];s instanceof z;s=s[Ct])e+=s.letter;Et(i[Ct]||this.parent.ends[Qt],s[Qt]||this.parent.ends[Ct]).each(function(t){t.italicize(!0).jQ.removeClass("mq-first mq-last"),t.ctrlSeq=t.letter});t:for(r=0,o=i[Ct]||this.parent.ends[Qt];r<e.length;r+=1,o=o[Ct])for(a=yt(d._maxLength,e.length-r);a>0;a-=1)if(l=e.slice(r,r+a),d.hasOwnProperty(l)){for(c=0,u=o;a>c;c+=1,u=u[Ct])u.italicize(!1),h=u;f=R.hasOwnProperty(l),o.ctrlSeq=(f?"\\":"\\operatorname{")+o.ctrlSeq,h.ctrlSeq+=f?" ":"}",$.hasOwnProperty(l)&&h[Qt][Qt][Qt].jQ.addClass("mq-last"),n(o[Qt])&&o.jQ.addClass("mq-first"),n(h[Ct])&&h.jQ.addClass("mq-last"),r+=a-1,o=h;continue t}}}}),R={},M=$t.p.autoOperatorNames={_maxLength:9},$={limsup:1,liminf:1,projlim:1,injlim:1},function(){var t,e,n,i,s="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" ");for(t=0;t<s.length;t+=1)R[s[t]]=M[s[t]]=1;for(e="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<e.length;t+=1)R[e[t]]=1;for(n="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<n.length;t+=1)M[n[t]]=M["arc"+n[t]]=M[n[t]+"h"]=M["ar"+n[t]+"h"]=M["arc"+n[t]+"h"]=1;for(i="gcf hcf lcm proj span".split(" "),t=0;t<i.length;t+=1)M[i[t]]=1}(),Bt.autoOperatorNames=function(t){var e,n,i,s,r;if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(e=t.split(" "),n={},i=0,s=0;s<e.length;s+=1){if(r=e[s],r.length<2)throw'"'+r+'" not minimum length of 2';n[r]=1,i=Ot(i,r.length)}return n._maxLength=i,n},B=jt(k,function(t,e){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){var e,n=this.ctrlSeq;for(e=0;e<n.length;e+=1)z(n.charAt(e)).createLeftOf(t)},t.parser=function(){var t,e=this.ctrlSeq,n=Q();for(t=0;t<e.length;t+=1)z(e.charAt(t)).adopt(n,n.ends[Ct],0);return w.succeed(n.children())}});for(F in M)M.hasOwnProperty(F)&&(At[F]=B);At.operatorname=jt(O,function(e){e.createLeftOf=t,e.numBlocks=function(){return 1},e.parser=function(){return q.block.map(function(t){return t.children()})}}),At.f=jt(z,function(t,e){t.init=function(){k.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},t.italicize=function(t){return this.jQ.html("f").toggleClass("mq-f",t),e.italicize.apply(this,arguments)}}),At[" "]=At.space=i(T,"\\ ","&nbsp;"),At["'"]=At.prime=i(T,"'","&prime;"),At.backslash=i(T,"\\backslash ","\\"),Lt["\\"]||(Lt["\\"]=At.backslash),At.$=i(T,"\\$","$"),N=jt(k,function(t,e){t.init=function(t,n){e.init.call(this,t,'<span class="mq-nonSymbola">'+(n||t)+"</span>")}}),At["@"]=N,At["&"]=i(N,"\\&","&amp;"),At["%"]=i(N,"\\%","%"),At.alpha=At.beta=At.gamma=At.delta=At.zeta=At.eta=At.theta=At.iota=At.kappa=At.mu=At.nu=At.xi=At.rho=At.sigma=At.tau=At.chi=At.psi=At.omega=jt(I,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),At.phi=i(I,"\\phi ","&#981;"),At.phiv=At.varphi=i(I,"\\varphi ","&phi;"),At.epsilon=i(I,"\\epsilon ","&#1013;"),At.epsiv=At.varepsilon=i(I,"\\varepsilon ","&epsilon;"),At.piv=At.varpi=i(I,"\\varpi ","&piv;"),At.sigmaf=At.sigmav=At.varsigma=i(I,"\\varsigma ","&sigmaf;"),At.thetav=At.vartheta=At.thetasym=i(I,"\\vartheta ","&thetasym;"),At.upsilon=At.upsi=i(I,"\\upsilon ","&upsilon;"),At.gammad=At.Gammad=At.digamma=i(I,"\\digamma ","&#989;"),At.kappav=At.varkappa=i(I,"\\varkappa ","&#1008;"),At.rhov=At.varrho=i(I,"\\varrho ","&#1009;"),At.pi=At["π"]=i(N,"\\pi ","&pi;"),At.lambda=i(N,"\\lambda ","&lambda;"),At.Upsilon=At.Upsi=At.upsih=At.Upsih=i(k,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),At.Gamma=At.Delta=At.Theta=At.Lambda=At.Xi=At.Pi=At.Sigma=At.Phi=At.Psi=At.Omega=At.forall=jt(T,function(t,e){
t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),P=jt(O,function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var e=q.parse(this.latex);e.children().adopt(t.parent,t[Qt],t[Ct]),t[Qt]=e.ends[Ct],e.jQize().insertBefore(t.jQ),e.finalizeInsert(t.options,t),e.ends[Ct][Ct].siblingCreated&&e.ends[Ct][Ct].siblingCreated(t.options,Qt),e.ends[Qt][Qt].siblingCreated&&e.ends[Qt][Qt].siblingCreated(t.options,Ct),t.parent.bubble("reflow")},t.parser=function(){var t=q.parse(this.latex).children();return w.succeed(t)}}),At["¹"]=i(P,"^1"),At["²"]=i(P,"^2"),At["³"]=i(P,"^3"),At["¼"]=i(P,"\\frac14"),At["½"]=i(P,"\\frac12"),At["¾"]=i(P,"\\frac34"),Y=jt(j,function(t){t.init=T.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,e){return e!==Ct?(this.jQ[0].className=!this[Qt]||this[Qt]instanceof j?"":"mq-binary-operator",this):void 0}}),At["+"]=i(Y,"+","+"),At["–"]=At["-"]=i(Y,"-","&minus;"),At["±"]=At.pm=At.plusmn=At.plusminus=i(Y,"\\pm ","&plusmn;"),At.mp=At.mnplus=At.minusplus=i(Y,"\\mp ","&#8723;"),Lt["*"]=At.sdot=At.cdot=i(j,"\\cdot ","&middot;","*"),W=jt(j,function(t,e){t.init=function(t,n){this.data=t,this.strict=n;var i=n?"Strict":"";e.init.call(this,t["ctrlSeq"+i],t["html"+i],t["text"+i])},t.swap=function(t){this.strict=t;var e=t?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+e],this.jQ.html(this.data["html"+e]),this.textTemplate=[this.data["text"+e]]},t.deleteTowards=function(t,n){return t!==Qt||this.strict?void e.deleteTowards.apply(this,arguments):(this.swap(!0),void this.bubble("reflow"))}}),X={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},U={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"},At["<"]=At.lt=i(W,X,!0),At[">"]=At.gt=i(W,U,!0),At["≤"]=At.le=At.leq=i(W,X,!1),At["≥"]=At.ge=At.geq=i(W,U,!1),G=jt(j,function(t,e){t.init=function(){e.init.call(this,"=","=")},t.createLeftOf=function(t){return t[Qt]instanceof W&&t[Qt].strict?(t[Qt].swap(!1),void t[Qt].bubble("reflow")):void e.createLeftOf.apply(this,arguments)}}),At["="]=G,At["×"]=At.times=i(j,"\\times ","&times;","[x]"),At["÷"]=At.div=At.divide=At.divides=i(j,"\\div ","&divide;","[/]"),Lt["~"]=At.sim=i(j,"\\sim ","~","~"),J=t,Z=document.createElement("div"),K=Z.style,V={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(et in V)if(et in K){tt=et;break}tt?H=function(t,e,n){t.css(tt,"scale("+e+","+n+")")}:"filter"in K?(J=function(t){t.className=t.className},H=function(t,e,n){function i(){t.css("marginRight",(s.width()-1)*(e-1)/e+"px")}var s,r;e/=1+(n-1)/2,t.css("fontSize",n+"em"),t.hasClass("mq-matrixed-container")||t.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>'),s=t.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+e+",SizingMethod='auto expand')"),i(),r=setInterval(i),_t(window).load(function(){clearTimeout(r),i()})}):H=function(t,e,n){t.css("fontSize",n+"em")},nt=jt(O,function(t,e){t.init=function(t,n,i){e.init.call(this,t,"<"+n+" "+i+">&0</"+n+">")}}),At.mathrm=i(nt,"\\mathrm","span",'class="mq-roman mq-font"'),At.mathit=i(nt,"\\mathit","i",'class="mq-font"'),At.mathbf=i(nt,"\\mathbf","b",'class="mq-font"'),At.mathsf=i(nt,"\\mathsf","span",'class="mq-sans-serif mq-font"'),At.mathtt=i(nt,"\\mathtt","span",'class="mq-monospace mq-font"'),At.underline=i(nt,"\\underline","span",'class="mq-non-leaf mq-underline"'),At.overline=At.bar=i(nt,"\\overline","span",'class="mq-non-leaf mq-overline"'),At.overrightarrow=i(nt,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),At.overleftarrow=i(nt,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"'),it=At.textcolor=jt(O,function(t,e){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var t=this,n=w.optWhitespace,i=w.string,s=w.regex;return n.then(i("{")).then(s(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(n){return t.setColor(n),e.parser.call(t)})}}),st=At["class"]=jt(O,function(t,e){t.parser=function(){var t=this,n=w.string,i=w.regex;return w.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return t.htmlTemplate='<span class="mq-class '+n+'">&0</span>',e.parser.call(t)})}}),rt=jt(O,function(t,e){t.ctrlSeq="_{...}^{...}",t.createLeftOf=function(t){return t[Qt]||!t.options.supSubsRequireOperand?e.createLeftOf.apply(this,arguments):void 0},t.contactWeld=function(t){var e,n,i,s,r,o;for(e=Qt;e;e=e===Qt&&Ct)if(this[e]instanceof rt){for(n="sub";n;n="sub"===n&&"sup")i=this[n],s=this[e][n],i&&(s?i.isEmpty()?o=St(s,0,s.ends[Qt]):(i.jQ.children().insAtDirEnd(-e,s.jQ),r=i.children().disown(),o=St(s,r.ends[Ct],s.ends[Qt]),e===Qt?r.adopt(s,s.ends[Ct],0):r.adopt(s,0,s.ends[Qt])):this[e].addBlock(i.disown()),this.placeCursor=function(t,n){return function(i){i.insAtDirEnd(-e,t||n)}}(s,i));this.remove(),t&&t[Qt]===this&&(e===Ct&&o?o[Qt]?t.insRightOf(o[Qt]):t.insAtLeftEnd(o.parent):t.insRightOf(this[e]));break}this.respace()},$t.p.charsThatBreakOutOfSupSub="",t.finalizeTree=function(){this.ends[Qt].write=function(t,e){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===e)return;var n=this.chToCmd(e);return n instanceof k?t.deleteSelection():t.clearSelection().insRightOf(this.parent),n.createLeftOf(t.show())}t[Qt]&&!t[Ct]&&!t.selection&&t.options.charsThatBreakOutOfSupSub.indexOf(e)>-1&&t.insRightOf(this.parent),Q.p.write.apply(this,arguments)}},t.moveTowards=function(t,n,i){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(t,this):e.moveTowards.apply(this,arguments)},t.deleteTowards=function(t,n){if(n.options.autoSubscriptNumerals&&this.sub){var i=this.sub.ends[-t];i instanceof k?i.remove():i&&i.deleteTowards(t,n.insAtDirEnd(-t,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(Qt,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-t,this))}else e.deleteTowards.apply(this,arguments)},t.latex=function(){function t(t,e){var n=e&&e.latex();return e?t+(1===n.length?n:"{"+(n||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)},t.respace=t.siblingCreated=t.siblingDeleted=function(t,e){e!==Ct&&this.jQ.toggleClass("mq-limit","\\int "===this[Qt].ctrlSeq)},t.addBlock=function(t){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=t,t.adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=_t('<span class="mq-sup"/>').append(t.jQ.children()).attr(qt,t.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=t,t.adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=_t('<span class="mq-sub"></span>').append(t.jQ.children()).attr(qt,t.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var e=0;2>e;e+=1)(function(t,e,n,i){t[e].deleteOutOf=function(s,r){if(r.insDirOf(this[s]?-s:s,this.parent),!this.isEmpty()){var o=this.ends[s];this.children().disown().withDirAdopt(s,r.parent,r[s],r[-s]).jQ.insDirOf(-s,r.jQ),r[-s]=o}t.supsub=n,delete t[e],delete t[i+"Into"],t[n][i+"OutOf"]=f,delete t[n].deleteOutOf,"sub"===e&&_t(t.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}}),At.subscript=At._=jt(rt,function(t,e){t.supsub="sub",t.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["_"],t.finalizeTree=function(){this.downInto=this.sub=this.ends[Qt],this.sub.upOutOf=f,e.finalizeTree.call(this)}}),At.superscript=At.supscript=At["^"]=jt(rt,function(t,e){t.supsub="sup",t.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',t.textTemplate=["^"],t.finalizeTree=function(){this.upInto=this.sup=this.ends[Ct],this.sup.downOutOf=f,e.finalizeTree.call(this)}}),ot=jt(O,function(t,e){t.init=function(t,e){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+e+'</big><span class="mq-from"><span>&0</span></span></span>';k.prototype.init.call(this,t,n)},t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),t.options.sumStartsWithNEquals&&(z("n").createLeftOf(t),G().createLeftOf(t))},t.latex=function(){function t(t){return 1===t.length?t:"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[Qt].latex())+"^"+t(this.ends[Ct].latex())},t.parser=function(){var t,e=w.string,n=w.optWhitespace,i=w.succeed,s=q.block,r=this,o=r.blocks=[Q(),Q()];for(t=0;t<o.length;t+=1)o[t].adopt(r,r.ends[Ct],0);return n.then(e("_").or(e("^"))).then(function(t){var e=o["_"===t?0:1];return s.then(function(t){return t.children().adopt(e,e.ends[Ct],0),i(r)})}).many().result(r)},t.finalizeTree=function(){this.downInto=this.ends[Qt],this.upInto=this.ends[Ct],this.ends[Qt].upOutOf=this.ends[Ct],this.ends[Ct].downOutOf=this.ends[Qt]}}),At["∑"]=At.sum=At.summation=i(ot,"\\sum ","&sum;"),At["∏"]=At.prod=At.product=i(ot,"\\prod ","&prod;"),At.coprod=At.coproduct=i(ot,"\\coprod ","&#8720;"),at=At.frac=At.dfrac=At.cfrac=At.fraction=jt(O,function(t,e){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["(",")/(",")"],t.finalizeTree=function(){this.upInto=this.ends[Ct].upOutOf=this.ends[Qt],this.downInto=this.ends[Qt].downOutOf=this.ends[Ct]}}),lt=At.over=Lt["/"]=jt(at,function(e,n){e.createLeftOf=function(e){if(!this.replacedFragment){for(var i=e[Qt];i&&!(i instanceof j||i instanceof(At.text||t)||i instanceof ot||"\\ "===i.ctrlSeq||/^[,;:]$/.test(i.ctrlSeq));)i=i[Qt];i instanceof ot&&i[Ct]instanceof rt&&(i=i[Ct],i[Ct]instanceof rt&&i[Ct].ctrlSeq!=i.ctrlSeq&&(i=i[Ct])),i!==e[Qt]&&(this.replaces(Et(i[Ct]||e.parent.ends[Qt],e[Qt])),e[Qt]=i)}n.createLeftOf.call(this,e)}}),ct=At.sqrt=At["√"]=jt(O,function(t,e){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.parser=function(){return q.optBlock.then(function(t){return q.block.map(function(e){var n=ht();return n.blocks=[t,e],t.adopt(n,0,0),e.adopt(n,t,0),n})}).or(e.parser.call(this))},t.reflow=function(){var t=this.ends[Ct].jQ;H(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}}),ut=At.vec=jt(O,function(t,e){t.ctrlSeq="\\vec",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',t.textTemplate=["vec(",")"]}),ht=At.nthroot=jt(ct,function(t,e){t.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[Qt].latex()+"]{"+this.ends[Ct].latex()+"}"}}),ft=jt(jt(O,d),function(e,n){e.init=function(t,e,i,s,r){n.init.call(this,"\\left"+s,m,[e,i]),this.side=t,this.sides={},this.sides[Qt]={ch:e,ctrlSeq:s},this.sides[Ct]={ch:i,ctrlSeq:r}},e.numBlocks=function(){return 1},e.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===Ct?" mq-ghost":"")+'">'+this.sides[Qt].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===Qt?" mq-ghost":"")+'">'+this.sides[Ct].ch+"</span></span>",n.html.call(this)},e.latex=function(){return"\\left"+this.sides[Qt].ctrlSeq+this.ends[Qt].latex()+"\\right"+this.sides[Ct].ctrlSeq},e.oppBrack=function(t,e,n){return e instanceof ft&&e.side&&e.side!==-n&&("|"===this.sides[this.side].ch||e.side===-this.side)&&(!t.restrictMismatchedBrackets||dt[this.sides[this.side].ch]===e.sides[e.side].ch||{"(":"]","[":")"}[this.sides[Qt].ch]===e.sides[Ct].ch)&&e},e.closeOpposing=function(t){t.side=0,t.sides[this.side]=this.sides[this.side],t.delimjQs.eq(this.side===Qt?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},e.createLeftOf=function(t){var e,i,s;this.replacedFragment||(e=t.options,i=this.oppBrack(e,t[Qt],Qt)||this.oppBrack(e,t[Ct],Ct)||this.oppBrack(e,t.parent.parent)),i?(s=this.side=-i.side,this.closeOpposing(i),i===t.parent.parent&&t[s]&&(Et(t[s],t.parent.ends[s],-s).disown().withDirAdopt(-s,i.parent,i,i[s]).jQ.insDirOf(s,i.jQ),i.bubble("reflow"))):(i=this,s=i.side,i.replacedFragment?i.side=0:t[-s]&&(i.replaces(Et(t[-s],t.parent.ends[-s],s)),t[-s]=0),n.createLeftOf.call(i,t)),s===Qt?t.insAtLeftEnd(i.ends[Qt]):t.insRightOf(i)},e.placeCursor=t,e.unwrap=function(){this.ends[Qt].children().disown().adopt(this.parent,this,this[Ct]).jQ.insertAfter(this.jQ),this.remove()},e.deleteSide=function(t,e,n){var i,s,r,o=this.parent,a=this[t],l=o.ends[t];if(t===this.side)return this.unwrap(),void(a?n.insDirOf(-t,a):n.insAtDirEnd(t,o));if(i=n.options,s=!this.side,this.side=-t,this.oppBrack(i,this.ends[Qt].ends[this.side],t))this.closeOpposing(this.ends[Qt].ends[this.side]),r=this.ends[Qt].ends[t],this.unwrap(),r.siblingCreated&&r.siblingCreated(n.options,t),a?n.insDirOf(-t,a):n.insAtDirEnd(t,o);else{if(this.oppBrack(i,this.parent.parent,t))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(e&&s)return this.unwrap(),void(a?n.insDirOf(-t,a):n.insAtDirEnd(t,o));this.sides[t]={ch:dt[this.sides[this.side].ch],ctrlSeq:dt[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(t===Qt?0:1).addClass("mq-ghost").html(this.sides[t].ch)}a?(r=this.ends[Qt].ends[t],Et(a,l,-t).disown().withDirAdopt(-t,this.ends[Qt],r,0).jQ.insAtDirEnd(t,this.ends[Qt].jQ.removeClass("mq-empty")),r.siblingCreated&&r.siblingCreated(n.options,t),n.insDirOf(-t,a)):e?n.insDirOf(t,this):n.insAtDirEnd(t,this.ends[Qt])}},e.deleteTowards=function(t,e){this.deleteSide(-t,!1,e)},e.finalizeTree=function(){this.ends[Qt].deleteOutOf=function(t,e){this.parent.deleteSide(t,!0,e)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===Qt?1:0).removeClass("mq-ghost"),this.side=0}},e.siblingCreated=function(t,e){e===-this.side&&this.finalizeTree()}}),dt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"},p("("),p("["),p("{","\\{"),At.langle=i(ft,Qt,"&lang;","&rang;","\\langle ","\\rangle "),At.rangle=i(ft,Ct,"&lang;","&rang;","\\langle ","\\rangle "),Lt["|"]=i(ft,Qt,"|","|","|","|"),At.left=jt(O,function(t){t.parser=function(){var t=w.regex,e=w.string,n=(w.succeed,w.optWhitespace);return n.then(t(/^(?:[([|]|\\\{)/)).then(function(i){var s="\\"===i.charAt(0)?i.slice(1):i;return q.then(function(r){return e("\\right").skip(n).then(t(/^(?:[\])|]|\\\})/)).map(function(t){var e="\\"===t.charAt(0)?t.slice(1):t,n=ft(0,s,e,i,t);return n.blocks=[r],r.adopt(n,0,0),n})})})}}),At.right=jt(O,function(t){t.parser=function(){return w.fail("unmatched \\right")}}),pt=At.binom=At.binomial=jt(jt(O,d),function(t,e){t.ctrlSeq="\\binom",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',t.textTemplate=["choose(",",",")"]}),mt=At.choose=jt(pt,function(t){t.createLeftOf=lt.prototype.createLeftOf}),At.editable=At.MathQuillMathField=jt(O,function(t,e){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',t.parser=function(){var t=this,n=w.string,i=w.regex,s=w.succeed;return n("[").then(i(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(e){t.name=e}).or(s()).then(e.parser.call(t))},t.finalizeTree=function(){var t=Rt(this.ends[Qt],this.jQ,$t());t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),u(t.root)},t.registerInnerField=function(t,e){t.push(t[this.name]=e(this.ends[Qt].controller))},t.latex=function(){return this.ends[Qt].latex()},t.text=function(){return this.ends[Qt].text()}}),gt=At.embed=jt(k,function(t,e){t.setOptions=function(t){function e(){return""}return this.text=t.text||e,this.htmlTemplate=t.htmlString||"",this.latex=t.latex||e,this},t.parser=function(){var t=this;return string=w.string,regex=w.regex,succeed=w.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(e){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(n){return t.setOptions(Nt[e](n))})})}}),vt=c(1);for(bt in vt)(function(t,e){"function"==typeof e?(l[t]=function(){return a(),e.apply(this,arguments)},l[t].prototype=e.prototype):l[t]=e})(bt,vt[bt])}()}]);
//# sourceMappingURL=anaylsisDetail.js.map